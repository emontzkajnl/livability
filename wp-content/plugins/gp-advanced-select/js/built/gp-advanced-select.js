/*! For license information please see gp-advanced-select.js.LICENSE.txt */
(()=>{var t={505:function(t){t.exports=function(){"use strict";function t(t,e){t.split(/\s+/).forEach((t=>{e(t)}))}class e{constructor(){this._events=void 0,this._events={}}on(e,n){t(e,(t=>{const e=this._events[t]||[];e.push(n),this._events[t]=e}))}off(e,n){const i=arguments.length;0!==i?t(e,(t=>{if(1===i)return void delete this._events[t];const e=this._events[t];void 0!==e&&(e.splice(e.indexOf(n),1),this._events[t]=e)})):this._events={}}trigger(e,...n){const i=this;t(e,(t=>{const e=i._events[t];void 0!==e&&e.forEach((t=>{t.apply(i,n)}))}))}}const n=t=>(t=t.filter(Boolean)).length<2?t[0]||"":1==l(t)?"["+t.join("")+"]":"(?:"+t.join("|")+")",i=t=>{if(!s(t))return t.join("");let e="",n=0;const i=()=>{n>1&&(e+="{"+n+"}")};return t.forEach(((o,s)=>{o!==t[s-1]?(i(),e+=o,n=1):n++})),i(),e},o=t=>{let e=c(t);return n(e)},s=t=>new Set(t).size!==t.length,r=t=>(t+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),l=t=>t.reduce(((t,e)=>Math.max(t,a(e))),0),a=t=>c(t).length,c=t=>Array.from(t),d=t=>{if(1===t.length)return[[t]];let e=[];const n=t.substring(1);return d(n).forEach((function(n){let i=n.slice(0);i[0]=t.charAt(0)+i[0],e.push(i),i=n.slice(0),i.unshift(t.charAt(0)),e.push(i)})),e},u=[[0,65535]];let p,h;const f={},g={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let t in g){let e=g[t]||"";for(let n=0;n<e.length;n++){let i=e.substring(n,n+1);f[i]=t}}const m=new RegExp(Object.keys(f).join("|")+"|[̀-ͯ·ʾʼ]","gu"),v=(t,e="NFKD")=>t.normalize(e),y=t=>c(t).reduce(((t,e)=>t+b(e)),""),b=t=>(t=v(t).toLowerCase().replace(m,(t=>f[t]||"")),v(t,"NFC"));const w=t=>{const e={},n=(t,n)=>{const i=e[t]||new Set,s=new RegExp("^"+o(i)+"$","iu");n.match(s)||(i.add(r(n)),e[t]=i)};for(let e of function*(t){for(const[e,n]of t)for(let t=e;t<=n;t++){let e=String.fromCharCode(t),n=y(e);n!=e.toLowerCase()&&(n.length>3||0!=n.length&&(yield{folded:n,composed:e,code_point:t}))}}(t))n(e.folded,e.folded),n(e.folded,e.composed);return e},O=t=>{const e=w(t),i={};let s=[];for(let t in e){let n=e[t];n&&(i[t]=o(n)),t.length>1&&s.push(r(t))}s.sort(((t,e)=>e.length-t.length));const l=n(s);return h=new RegExp("^"+l,"u"),i},x=(t,e=1)=>(e=Math.max(e,t.length-1),n(d(t).map((t=>((t,e=1)=>{let n=0;return t=t.map((t=>(p[t]&&(n+=t.length),p[t]||t))),n>=e?i(t):""})(t,e))))),_=(t,e=!0)=>{let o=t.length>1?1:0;return n(t.map((t=>{let n=[];const s=e?t.length():t.length()-1;for(let e=0;e<s;e++)n.push(x(t.substrs[e]||"",o));return i(n)})))},I=(t,e)=>{for(const n of e){if(n.start!=t.start||n.end!=t.end)continue;if(n.substrs.join("")!==t.substrs.join(""))continue;let e=t.parts;const i=t=>{for(const n of e){if(n.start===t.start&&n.substr===t.substr)return!1;if(1!=t.length&&1!=n.length){if(t.start<n.start&&t.end>n.start)return!0;if(n.start<t.start&&n.end>t.start)return!0}}return!1};if(!(n.parts.filter(i).length>0))return!0}return!1};class S{constructor(){this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let n=new S,i=JSON.parse(JSON.stringify(this.parts)),o=i.pop();for(const t of i)n.add(t);let s=e.substr.substring(0,t-o.start),r=s.length;return n.add({start:o.start,end:o.start+r,length:r,substr:s}),n}}const A=t=>{var e;void 0===p&&(p=O(e||u)),t=y(t);let n="",i=[new S];for(let e=0;e<t.length;e++){let o=t.substring(e).match(h);const s=t.substring(e,e+1),r=o?o[0]:null;let l=[],a=new Set;for(const t of i){const n=t.last();if(!n||1==n.length||n.end<=e)if(r){const n=r.length;t.add({start:e,end:e+n,length:n,substr:r}),a.add("1")}else t.add({start:e,end:e+1,length:1,substr:s}),a.add("2");else if(r){let i=t.clone(e,n);const o=r.length;i.add({start:e,end:e+o,length:o,substr:r}),l.push(i)}else a.add("3")}if(l.length>0){l=l.sort(((t,e)=>t.length()-e.length()));for(let t of l)I(t,i)||i.push(t)}else if(e>0&&1==a.size&&!a.has("3")){n+=_(i,!1);let t=new S;const e=i[0];e&&t.add(e.last()),i=[t]}}return n+=_(i,!0),n},C=(t,e)=>{if(t)return t[e]},k=(t,e)=>{if(t){for(var n,i=e.split(".");(n=i.shift())&&(t=t[n]););return t}},F=(t,e,n)=>{var i,o;return t?(t+="",null==e.regex||-1===(o=t.search(e.regex))?0:(i=e.string.length/t.length,0===o&&(i+=.5),i*n)):0},L=(t,e)=>{var n=t[e];if("function"==typeof n)return n;n&&!Array.isArray(n)&&(t[e]=[n])},E=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},j=(t,e)=>"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=y(t+"").toLowerCase())>(e=y(e+"").toLowerCase())?1:e>t?-1:0;class P{constructor(t,e){this.items=void 0,this.settings=void 0,this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,n){if(!t||!t.length)return[];const i=[],o=t.split(/\s+/);var s;return n&&(s=new RegExp("^("+Object.keys(n).map(r).join("|")+"):(.*)$")),o.forEach((t=>{let n,o=null,l=null;s&&(n=t.match(s))&&(o=n[1],t=n[2]),t.length>0&&(l=this.settings.diacritics?A(t)||null:r(t),l&&e&&(l="\\b"+l)),i.push({string:t,regex:l?new RegExp(l,"iu"):null,field:o})})),i}getScoreFunction(t,e){var n=this.prepareSearch(t,e);return this._getScoreFunction(n)}_getScoreFunction(t){const e=t.tokens,n=e.length;if(!n)return function(){return 0};const i=t.options.fields,o=t.weights,s=i.length,r=t.getAttrFn;if(!s)return function(){return 1};const l=1===s?function(t,e){const n=i[0].field;return F(r(e,n),t,o[n]||1)}:function(t,e){var n=0;if(t.field){const i=r(e,t.field);!t.regex&&i?n+=1/s:n+=F(i,t,1)}else E(o,((i,o)=>{n+=F(r(e,o),t,i)}));return n/s};return 1===n?function(t){return l(e[0],t)}:"and"===t.options.conjunction?function(t){var i,o=0;for(let n of e){if((i=l(n,t))<=0)return 0;o+=i}return o/n}:function(t){var i=0;return E(e,(e=>{i+=l(e,t)})),i/n}}getSortFunction(t,e){var n=this.prepareSearch(t,e);return this._getSortFunction(n)}_getSortFunction(t){var e,n=[];const i=this,o=t.options,s=!t.query&&o.sort_empty?o.sort_empty:o.sort;if("function"==typeof s)return s.bind(this);const r=function(e,n){return"$score"===e?n.score:t.getAttrFn(i.items[n.id],e)};if(s)for(let e of s)(t.query||"$score"!==e.field)&&n.push(e);if(t.query){e=!0;for(let t of n)if("$score"===t.field){e=!1;break}e&&n.unshift({field:"$score",direction:"desc"})}else n=n.filter((t=>"$score"!==t.field));return n.length?function(t,e){var i,o;for(let s of n)if(o=s.field,i=("desc"===s.direction?-1:1)*j(r(o,t),r(o,e)))return i;return 0}:null}prepareSearch(t,e){const n={};var i=Object.assign({},e);if(L(i,"sort"),L(i,"sort_empty"),i.fields){L(i,"fields");const t=[];i.fields.forEach((e=>{"string"==typeof e&&(e={field:e,weight:1}),t.push(e),n[e.field]="weight"in e?e.weight:1})),i.fields=t}return{options:i,query:t.toLowerCase().trim(),tokens:this.tokenize(t,i.respect_word_boundaries,n),total:0,items:[],weights:n,getAttrFn:i.nesting?k:C}}search(t,e){var n,i,o=this;i=this.prepareSearch(t,e),e=i.options,t=i.query;const s=e.score||o._getScoreFunction(i);t.length?E(o.items,((t,o)=>{n=s(t),(!1===e.filter||n>0)&&i.items.push({score:n,id:o})})):E(o.items,((t,e)=>{i.items.push({score:1,id:e})}));const r=o._getSortFunction(i);return r&&i.items.sort(r),i.total=i.items.length,"number"==typeof e.limit&&(i.items=i.items.slice(0,e.limit)),i}}const T=(t,e)=>{if(Array.isArray(t))t.forEach(e);else for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},D=t=>{if(t.jquery)return t[0];if(t instanceof HTMLElement)return t;if(V(t)){const e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}return document.querySelector(t)},V=t=>"string"==typeof t&&t.indexOf("<")>-1,q=(t,e)=>{const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!1),t.dispatchEvent(n)},M=(t,e)=>{Object.assign(t.style,e)},H=(t,...e)=>{const n=N(e);(t=R(t)).forEach((t=>{n.forEach((e=>{t.classList.add(e)}))}))},B=(t,...e)=>{const n=N(e);(t=R(t)).forEach((t=>{n.forEach((e=>{t.classList.remove(e)}))}))},N=t=>{let e=[];return T(t,(t=>{"string"==typeof t&&(t=t.trim().split(/[\11\12\14\15\40]/)),Array.isArray(t)&&(e=e.concat(t))})),e.filter(Boolean)},R=t=>(Array.isArray(t)||(t=[t]),t),z=(t,e,n)=>{if(!n||n.contains(t))for(;t&&t.matches;){if(t.matches(e))return t;t=t.parentNode}},W=(t,e=0)=>e>0?t[t.length-1]:t[0],K=(t,e)=>{if(!t)return-1;e=e||t.nodeName;let n=0;for(;t=t.previousElementSibling;)t.matches(e)&&n++;return n},Q=(t,e)=>{T(e,((e,n)=>{null==e?t.removeAttribute(n):t.setAttribute(n,""+e)}))},U=(t,e)=>{t.parentNode&&t.parentNode.replaceChild(e,t)},G=(t,e)=>{if(null===e)return;if("string"==typeof e){if(!e.length)return;e=new RegExp(e,"i")}const n=t=>3===t.nodeType?(t=>{const n=t.data.match(e);if(n&&t.data.length>0){const e=document.createElement("span");e.className="highlight";const i=t.splitText(n.index);i.splitText(n[0].length);const o=i.cloneNode(!0);return e.appendChild(o),U(i,e),1}return 0})(t):((t=>{1!==t.nodeType||!t.childNodes||/(script|style)/i.test(t.tagName)||"highlight"===t.className&&"SPAN"===t.tagName||Array.from(t.childNodes).forEach((t=>{n(t)}))})(t),0);n(t)},J="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey";var X={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:t=>t.length>0,render:{}};const Y=t=>null==t?null:Z(t),Z=t=>"boolean"==typeof t?t?"1":"0":t+"",tt=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),et=(t,e)=>{let n;return function(i,o){const s=this;n&&(s.loading=Math.max(s.loading-1,0),clearTimeout(n)),n=setTimeout((function(){n=null,s.loadedSearches[i]=!0,t.call(s,i,o)}),e)}},nt=(t,e,n)=>{let i;const o=t.trigger,s={};for(i of(t.trigger=function(){const n=arguments[0];if(-1===e.indexOf(n))return o.apply(t,arguments);s[n]=arguments},n.apply(t,[]),t.trigger=o,e))i in s&&o.apply(t,s[i])},it=(t,e=!1)=>{t&&(t.preventDefault(),e&&t.stopPropagation())},ot=(t,e,n,i)=>{t.addEventListener(e,n,i)},st=(t,e)=>!!e&&!!e[t]&&1==(e.altKey?1:0)+(e.ctrlKey?1:0)+(e.shiftKey?1:0)+(e.metaKey?1:0),rt=(t,e)=>t.getAttribute("id")||(t.setAttribute("id",e),e),lt=t=>t.replace(/[\\"']/g,"\\$&"),at=(t,e)=>{e&&t.append(e)};function ct(t,e){const n=Object.assign({},X,e),i=n.dataAttr,o=n.labelField,s=n.valueField,r=n.disabledField,l=n.optgroupField,a=n.optgroupLabelField,c=n.optgroupValueField,d=t.tagName.toLowerCase();let u=t.getAttribute("placeholder")||t.getAttribute("data-placeholder");if(!u&&!n.allowEmptyOption){const e=t.querySelector('option[value=""]');e&&(u=e.textContent)}const p={placeholder:u,options:[],optgroups:[],items:[],maxItems:null};return"select"===d?(()=>{let e;const d=p.options,u={};let h=1;const f=t=>{let e=Object.assign({},t.dataset);const n=i&&e[i];return"string"==typeof n&&n.length&&(e=Object.assign(e,JSON.parse(n))),e},g=(t,e)=>{const i=Y(t.value);if(null!=i&&(i||n.allowEmptyOption)){if(u.hasOwnProperty(i)){if(e){const t=u[i][l];t?Array.isArray(t)?t.push(e):u[i][l]=[t,e]:u[i][l]=e}}else{const n=f(t);n[o]=n[o]||t.textContent,n[s]=n[s]||i,n[r]=n[r]||t.disabled,n[l]=n[l]||e,n.$option=t,u[i]=n,d.push(n)}t.selected&&p.items.push(i)}};p.maxItems=t.hasAttribute("multiple")?null:1,T(t.children,(t=>{e=t.tagName.toLowerCase(),"optgroup"===e?(t=>{const e=f(t);e[a]=e[a]||t.getAttribute("label")||"",e[c]=e[c]||h++,e[r]=e[r]||t.disabled,p.optgroups.push(e);const n=e[c];T(t.children,(t=>{g(t,n)}))})(t):"option"===e&&g(t)}))})():(()=>{const e=t.getAttribute(i);if(e)p.options=JSON.parse(e),T(p.options,(t=>{p.items.push(t[s])}));else{const e=t.value.trim()||"";if(!n.allowEmptyOption&&!e.length)return;const i=e.split(n.delimiter);T(i,(t=>{const e={};e[o]=t,e[s]=t,p.options.push(e)})),p.items=i}})(),Object.assign({},X,p,e)}let dt=0;class ut extends(function(t){return t.plugins={},class extends t{constructor(...t){super(...t),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(e,n){t.plugins[e]={name:e,fn:n}}initializePlugins(t){let e,n;const i=this,o=[];if(Array.isArray(t))t.forEach((t=>{"string"==typeof t?o.push(t):(i.plugins.settings[t.name]=t.options,o.push(t.name))}));else if(t)for(e in t)t.hasOwnProperty(e)&&(i.plugins.settings[e]=t[e],o.push(e));for(;n=o.shift();)i.require(n)}loadPlugin(e){const n=this,i=n.plugins,o=t.plugins[e];if(!t.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');i.requested[e]=!0,i.loaded[e]=o.fn.apply(n,[n.plugins.settings[e]||{}]),i.names.push(e)}require(t){const e=this,n=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return n.loaded[t]}}}(e)){constructor(t,e){super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.focus_node=void 0,this.mutationObserver=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.isOpen=!1,this.isDisabled=!1,this.isRequired=void 0,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.currentResults=void 0,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],dt++;const n=D(t);if(n.tomselect)throw new Error("Tom Select already initialized on this element");n.tomselect=this;const i=(window.getComputedStyle&&window.getComputedStyle(n,null)).getPropertyValue("direction"),o=ct(n,e);this.settings=o,this.input=n,this.tabIndex=n.tabIndex||0,this.is_select_tag="select"===n.tagName.toLowerCase(),this.rtl=/rtl/i.test(i),this.inputId=rt(n,"tomselect-"+dt),this.isRequired=n.required,this.sifter=new P(this.options,{diacritics:o.diacritics}),o.mode=o.mode||(1===o.maxItems?"single":"multi"),"boolean"!=typeof o.hideSelected&&(o.hideSelected="multi"===o.mode),"boolean"!=typeof o.hidePlaceholder&&(o.hidePlaceholder="multi"!==o.mode);let s=o.createFilter;"function"!=typeof s&&("string"==typeof s&&(s=new RegExp(s)),s instanceof RegExp?o.createFilter=t=>s.test(t):o.createFilter=t=>this.settings.duplicates||!this.options[t]),this.initializePlugins(o.plugins),this.setupCallbacks(),this.setupTemplates();const r=D("<div>"),l=D("<div>"),a=this._render("dropdown"),c=D('<div role="listbox" tabindex="-1">'),d=this.input.getAttribute("class")||"",u=o.mode;let p;H(r,o.wrapperClass,d,u),H(l,o.controlClass),at(r,l),H(a,o.dropdownClass,u),o.copyClassesToDropdown&&H(a,d),H(c,o.dropdownContentClass),at(a,c),D(o.dropdownParent||r).appendChild(a),V(o.controlInput)?(p=D(o.controlInput),E(["autocorrect","autocapitalize","autocomplete"],(t=>{n.getAttribute(t)&&Q(p,{[t]:n.getAttribute(t)})})),p.tabIndex=-1,l.appendChild(p),this.focus_node=p):o.controlInput?(p=D(o.controlInput),this.focus_node=p):(p=D("<input/>"),this.focus_node=l),this.wrapper=r,this.dropdown=a,this.dropdown_content=c,this.control=l,this.control_input=p,this.setup()}setup(){const t=this,e=t.settings,n=t.control_input,i=t.dropdown,o=t.dropdown_content,s=t.wrapper,l=t.control,a=t.input,c=t.focus_node,d={passive:!0},u=t.inputId+"-ts-dropdown";Q(o,{id:u}),Q(c,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":u});const p=rt(c,t.inputId+"-ts-control"),h="label[for='"+(t=>t.replace(/['"\\]/g,"\\$&"))(t.inputId)+"']",f=document.querySelector(h),g=t.focus.bind(t);if(f){ot(f,"click",g),Q(f,{for:p});const e=rt(f,t.inputId+"-ts-label");Q(c,{"aria-labelledby":e}),Q(o,{"aria-labelledby":e})}if(s.style.width=a.style.width,t.plugins.names.length){const e="plugin-"+t.plugins.names.join(" plugin-");H([s,i],e)}(null===e.maxItems||e.maxItems>1)&&t.is_select_tag&&Q(a,{multiple:"multiple"}),e.placeholder&&Q(n,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+r(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=et(e.load,e.loadThrottle)),t.control_input.type=a.type,ot(i,"mousemove",(()=>{t.ignoreHover=!1})),ot(i,"mouseenter",(e=>{const n=z(e.target,"[data-selectable]",i);n&&t.onOptionHover(e,n)}),{capture:!0}),ot(i,"click",(e=>{const n=z(e.target,"[data-selectable]");n&&(t.onOptionSelect(e,n),it(e,!0))})),ot(l,"click",(e=>{const i=z(e.target,"[data-ts-item]",l);i&&t.onItemSelect(e,i)?it(e,!0):""===n.value&&(t.onClick(),it(e,!0))})),ot(c,"keydown",(e=>t.onKeyDown(e))),ot(n,"keypress",(e=>t.onKeyPress(e))),ot(n,"input",(e=>t.onInput(e))),ot(c,"blur",(e=>t.onBlur(e))),ot(c,"focus",(e=>t.onFocus(e))),ot(n,"paste",(e=>t.onPaste(e)));const m=e=>{const o=e.composedPath()[0];if(!s.contains(o)&&!i.contains(o))return t.isFocused&&t.blur(),void t.inputState();o==n&&t.isOpen?e.stopPropagation():it(e,!0)},v=()=>{t.isOpen&&t.positionDropdown()};ot(document,"mousedown",m),ot(window,"scroll",v,d),ot(window,"resize",v,d),this._destroy=()=>{document.removeEventListener("mousedown",m),window.removeEventListener("scroll",v),window.removeEventListener("resize",v),f&&f.removeEventListener("click",g)},this.revertSettings={innerHTML:a.innerHTML,tabIndex:a.tabIndex},a.tabIndex=-1,a.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,ot(a,"invalid",(()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())})),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,a.disabled?t.disable():t.enable(),t.on("change",this.onChange),H(a,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),!0===e.preload&&t.preload(),this.setupMutationObserver(this.input)}setupMutationObserver(t){this.mutationObserver=new MutationObserver(((t,e)=>{E(this.options,(t=>{this.updateOption(t[this.settings.valueField],t)})),this.input.disabled!==this.isDisabled&&(this.input.disabled?this.disable():this.enable())})),this.mutationObserver.observe(t,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["disabled"]})}setupOptions(t=[],e=[]){this.addOptions(t),E(e,(t=>{this.registerOptionGroup(t)}))}setupTemplates(){const t=this,e=t.settings.labelField,n=t.settings.optgroupLabelField,i={optgroup:t=>{const e=document.createElement("div");return e.className="optgroup",e.appendChild(t.options),e},optgroup_header:(t,e)=>'<div class="optgroup-header">'+e(t[n])+"</div>",option:(t,n)=>"<div>"+n(t[e])+"</div>",item:(t,n)=>"<div>"+n(t[e])+"</div>",option_create:(t,e)=>'<div class="create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},i,t.settings.render)}setupCallbacks(){let t,e;const n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)e=this.settings[n[t]],e&&this.on(t,e)}sync(t=!0){const e=this,n=t?ct(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(n.options,n.optgroups),e.setValue(n.items||[],!0),e.lastQuery=null}onClick(){const t=this;if(t.activeItems.length>0)return t.clearActiveItems(),void t.focus();t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){q(this.input,"input"),q(this.input,"change")}onPaste(t){const e=this;e.isInputHidden||e.isLocked?it(t):e.settings.splitOn&&setTimeout((()=>{const t=e.inputValue();if(!t.match(e.settings.splitOn))return;const n=t.trim().split(e.settings.splitOn);E(n,(t=>{Y(t)&&(this.options[t]?e.addItem(t):e.createItem(t))}))}),0)}onKeyPress(t){const e=this;if(e.isLocked)return void it(t);const n=String.fromCharCode(t.keyCode||t.which);e.settings.create&&"multi"===e.settings.mode&&n===e.settings.delimiter&&(e.createItem(),it(t))}onKeyDown(t){const e=this;if(e.ignoreHover=!0,e.isLocked)9!==t.keyCode&&it(t);else{switch(t.keyCode){case 65:if(st(J,t)&&""==e.control_input.value)return it(t),void e.selectAll();break;case 27:return e.isOpen&&(it(t,!0),e.close()),void e.clearActiveItems();case 40:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){const t=e.getAdjacent(e.activeOption,1);t&&e.setActiveOption(t)}return void it(t);case 38:if(e.activeOption){const t=e.getAdjacent(e.activeOption,-1);t&&e.setActiveOption(t)}return void it(t);case 13:return void(e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),it(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&it(t));case 37:return void e.advanceSelection(-1,t);case 39:return void e.advanceSelection(1,t);case 9:return void(e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),it(t)),e.settings.create&&e.createItem()&&it(t)));case 8:case 46:return void e.deleteSelection(t)}e.isInputHidden&&!st(J,t)&&it(t)}}onInput(t){const e=this;if(e.isLocked)return;const n=e.inputValue();e.lastValue!==n&&(e.lastValue=n,e.settings.shouldLoad.call(e,n)&&e.load(n),e.refreshOptions(),e.trigger("type",n))}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){const e=this,n=e.isFocused;if(e.isDisabled)return e.blur(),void it(t);e.ignoreFocus||(e.isFocused=!0,"focus"===e.settings.preload&&e.preload(),n||e.trigger("focus"),e.activeItems.length||(e.showInput(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(!1===document.hasFocus())return;const e=this;if(!e.isFocused)return;e.isFocused=!1,e.ignoreFocus=!1;const n=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,n):n()}onOptionSelect(t,e){const n=this;let i;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?n.createItem(null,(()=>{n.settings.closeAfterSelect&&n.close()})):(i=e.dataset.value,void 0!==i&&(n.lastQuery=null,n.addItem(i),n.settings.closeAfterSelect&&n.close(),!n.settings.hideSelected&&t.type&&/click/.test(t.type)&&n.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){const n=this;return!n.isLocked&&"multi"===n.settings.mode&&(it(t),n.setActiveItem(e,t),!0)}canLoad(t){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(t)}load(t){const e=this;if(!e.canLoad(t))return;H(e.wrapper,e.settings.loadingClass),e.loading++;const n=e.loadCallback.bind(e);e.settings.load.call(e,t,n)}loadCallback(t,e){const n=this;n.loading=Math.max(n.loading-1,0),n.lastQuery=null,n.clearActiveOption(),n.setupOptions(t,e),n.refreshOptions(n.isFocused&&!n.isInputHidden),n.loading||B(n.wrapper,n.settings.loadingClass),E(t,(t=>{if(!t.$option){const e=D('<option value="'+tt(t[this.settings.valueField])+'">'+tt(t[this.settings.labelField])+"</option>");t.$option=e,n.input.append(e)}})),n.trigger("load",t,e)}preload(){const t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){const e=this.control_input;e.value!==t&&(e.value=t,q(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){nt(this,e?[]:["change"],(()=>{this.clear(e),this.addItems(t,e)}))}setMaxItems(t){0===t&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){const n=this;if("single"===n.settings.mode)return;if(!t)return n.clearActiveItems(),void(n.isFocused&&n.showInput());const i=e&&e.type.toLowerCase();if("click"===i&&st("shiftKey",e)&&n.activeItems.length){const i=n.getLastActive();let o=Array.prototype.indexOf.call(n.control.children,i),s=Array.prototype.indexOf.call(n.control.children,t);if(o>s){const t=o;o=s,s=t}for(let t=o;t<=s;t++){const e=n.control.children[t];n.activeItems.includes(e.id)||n.setActiveItemClass(e)}it(e)}else"click"===i&&st(J,e)||"keydown"===i&&st("shiftKey",e)?t.classList.contains("active")?n.removeActiveItem(t):n.setActiveItemClass(t):(n.clearActiveItems(),n.setActiveItemClass(t));n.hideInput(),n.isFocused||n.focus()}getItemById(t){return document.getElementById(t)}setActiveItemClass(t){const e=this,n=e.control.querySelector(".last-active");n&&B(n,"last-active"),H(t,"active last-active"),e.trigger("item_select",t),e.activeItems.includes(t.id)||e.activeItems.push(t.id)}removeActiveItem(t){const e=this.activeItems.indexOf(t.id);this.activeItems.splice(e,1),B(t,"active")}clearActiveItems(){const t=this.activeItems.map((t=>this.getItemById(t))).filter(Boolean);B(t,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,Q(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),Q(t,{"aria-selected":"true"}),H(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const n=this.dropdown_content,i=n.clientHeight,o=n.scrollTop||0,s=t.offsetHeight,r=t.getBoundingClientRect().top-n.getBoundingClientRect().top+o;r+s>i+o?this.scroll(r-i+s,e):r<o&&this.scroll(r,e)}scroll(t,e){const n=this.dropdown_content;e&&(n.style.scrollBehavior=e),n.scrollTop=t,n.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(B(this.activeOption,"active"),Q(this.activeOption,{"aria-selected":null})),this.activeOption=null,Q(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if("single"===t.settings.mode)return;const e=t.controlChildren();e.length&&(t.hideInput(),t.close(),t.activeItems=e.map((t=>t.id)),E(e,(e=>{t.setActiveItemClass(e)})))}inputState(){const t=this;t.control.contains(t.control_input)&&(Q(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&Q(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){const t=this;t.isDisabled||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout((()=>{t.ignoreFocus=!1,t.onFocus()}),0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){const t=this.settings;let e=t.sortField;return"string"==typeof t.sortField&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){let e,n;const i=this,o=this.getSearchOptions();if(i.settings.score&&(n=i.settings.score.call(i,t),"function"!=typeof n))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==i.lastQuery?(i.lastQuery=t,e=i.sifter.search(t,Object.assign(o,{score:n})),i.currentResults=e):e=Object.assign({},i.currentResults),i.settings.hideSelected&&(e.items=e.items.filter((t=>{const e=Y(t.id);return!(e&&-1!==i.items.indexOf(e))}))),e}refreshOptions(t=!0){let e,n,i,o,s,r,l,a;const c={},d=[],u=this,p=u.inputValue(),h=p===u.lastQuery||""==p&&null==u.lastQuery,f=u.search(p);let g=null,m=u.settings.shouldOpen||!1;const v=u.dropdown_content;for(h&&(g=u.activeOption,g&&(l=g.closest("[data-group]"))),o=f.items.length,"number"==typeof u.settings.maxOptions&&(o=Math.min(o,u.settings.maxOptions)),o>0&&(m=!0),e=0;e<o;e++){const t=f.items[e];if(!t)continue;const o=t.id,a=u.options[o];if(void 0===a)continue;const p=Z(o);let h=u.getOption(p,!0);for(u.settings.hideSelected||h.classList.toggle("selected",u.items.includes(p)),s=a[u.settings.optgroupField]||"",r=Array.isArray(s)?s:[s],n=0,i=r&&r.length;n<i;n++){s=r[n],u.optgroups.hasOwnProperty(s)||(s="");let t=c[s];void 0===t&&(t=document.createDocumentFragment(),d.push(s)),n>0&&(h=h.cloneNode(!0),Q(h,{id:a.$id+"-clone-"+n,"aria-selected":null}),h.classList.add("ts-cloned"),B(h,"active"),u.activeOption&&u.activeOption.dataset.value==o&&l&&l.dataset.group===s.toString()&&(g=h)),t.appendChild(h),c[s]=t}}u.settings.lockOptgroupOrder&&d.sort(((t,e)=>{const n=u.optgroups[t],i=u.optgroups[e];return(n&&n.$order||0)-(i&&i.$order||0)}));const y=document.createDocumentFragment();E(d,(t=>{const e=c[t];if(!e||!e.children.length)return;const n=u.optgroups[t];if(void 0!==n){const t=document.createDocumentFragment(),i=u.render("optgroup_header",n);at(t,i),at(t,e);const o=u.render("optgroup",{group:n,options:t});at(y,o)}else at(y,e)})),v.innerHTML="",at(v,y),u.settings.highlight&&((t=>{const e=t.querySelectorAll("span.highlight");Array.prototype.forEach.call(e,(function(t){const e=t.parentNode;e.replaceChild(t.firstChild,t),e.normalize()}))})(v),f.query.length&&f.tokens.length&&E(f.tokens,(t=>{G(v,t.regex)})));const b=t=>{const e=u.render(t,{input:p});return e&&(m=!0,v.insertBefore(e,v.firstChild)),e};u.loading?b("loading"):u.settings.shouldLoad.call(u,p)?0===f.items.length&&b("no_results"):b("not_loading");const w=u.canCreate(p);if(w&&(a=b("option_create")),u.hasOptions=f.items.length>0||w,m){if(f.items.length>0){if(g||"single"!==u.settings.mode||null==u.items[0]||(g=u.getOption(u.items[0])),!v.contains(g)){let t=0;a&&!u.settings.addPrecedence&&(t=1),g=u.selectable()[t]}}else a&&(g=a);t&&!u.isOpen&&(u.open(),u.scrollToOption(g,"auto")),u.setActiveOption(g)}else u.clearActiveOption(),t&&u.isOpen&&u.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const n=this;if(Array.isArray(t))return n.addOptions(t,e),!1;const i=Y(t[n.settings.valueField]);return null!==i&&!n.options.hasOwnProperty(i)&&(t.$order=t.$order||++n.order,t.$id=n.inputId+"-opt-"+t.$order,n.options[i]=t,n.lastQuery=null,e&&(n.userOptions[i]=e,n.trigger("option_add",i,t)),i)}addOptions(t,e=!1){E(t,(t=>{this.addOption(t,e)}))}registerOption(t){return this.addOption(t)}registerOptionGroup(t){const e=Y(t[this.settings.optgroupValueField]);return null!==e&&(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){let n;e[this.settings.optgroupValueField]=t,(n=this.registerOptionGroup(e))&&this.trigger("optgroup_add",n,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){var n;const i=this;let o,s;const r=Y(t),l=Y(e[i.settings.valueField]);if(null===r)return;const a=i.options[r];if(null==a)return;if("string"!=typeof l)throw new Error("Value must be set in option data");const c=i.getOption(r),d=i.getItem(r);if(e.$order=e.$order||a.$order,delete i.options[r],i.uncacheValue(l),e.disabled=Boolean(null==e||null==(n=e.$option)?void 0:n.disabled),i.options[l]=e,c){if(i.dropdown_content.contains(c)){const t=i._render("option",e);i.items.includes(l)&&t.classList.add("selected"),U(c,t),i.activeOption===c&&i.setActiveOption(t)}c.remove()}d&&(s=i.items.indexOf(r),-1!==s&&i.items.splice(s,1,l),o=i._render("item",e),d.classList.contains("active")&&H(o,"active"),U(d,o)),i.lastQuery=null}removeOption(t,e){const n=this;t=Z(t),n.uncacheValue(t),delete n.userOptions[t],delete n.options[t],n.lastQuery=null,n.trigger("option_remove",t),n.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const n={};E(this.options,((t,i)=>{e(t,i)&&(n[i]=t)})),this.options=this.sifter.items=n,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const n=Y(t);if(null===n)return null;const i=this.options[n];if(null!=i){if(i.$div)return i.$div;if(e)return this._render("option",i)}return null}getAdjacent(t,e,n="option"){let i;if(!t)return null;i="item"==n?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]");for(let n=0;n<i.length;n++)if(i[n]==t)return e>0?i[n+1]:i[n-1];return null}getItemOld(t){if("object"==typeof t)return t;const e=Y(t);return null!==e?this.control.querySelector(`[data-value="${lt(e)}"]`):null}getItem(t){if("object"==typeof t)return t;const e=Y(t);if(!e)return null;const n=this.options[e];if(!n)return null;return document.getElementById(`${n.$id}-item`)||null}addItems(t,e){const n=this;let i=Array.isArray(t)?t:[t];i=i.filter((t=>-1===n.items.indexOf(t)));const o=i[i.length-1];i.forEach((t=>{n.isPending=t!==o,n.addItem(t,e)}))}addItem(t,e){nt(this,e?[]:["change","dropdown_close"],(()=>{let n;const i=this,o=i.settings.mode,s=Y(t);if(s&&-1!==i.items.indexOf(s)&&("single"===o&&i.close(),"single"===o||!i.settings.duplicates))return;if(null===s||!i.options.hasOwnProperty(s))return;if("single"===o&&i.clear(e),"multi"===o&&i.isFull())return;n=i._render("item",i.options[s]),i.control.contains(n)&&(n=n.cloneNode(!0));const r=i.isFull();if(i.items.splice(i.caretPos,0,s),i.insertAtCaret(n),i.isSetup){if(!i.isPending&&i.settings.hideSelected){const t=i.getOption(s),e=i.getAdjacent(t,1);e&&i.setActiveOption(e)}i.isPending||i.settings.closeAfterSelect||i.refreshOptions(i.isFocused&&"single"!==o),0!=i.settings.closeAfterSelect&&i.isFull()?i.close():i.isPending||i.positionDropdown(),i.trigger("item_add",s,n),i.isPending||i.updateOriginalInput({silent:e})}(!i.isPending||!r&&i.isFull())&&(i.inputState(),i.refreshState())}))}removeItem(t=null,e){const n=this;if(!(t=n.getItem(t)))return;let i;const o=t.dataset.value,s=K(t);t.remove(),t.classList.contains("active")&&(i=n.activeItems.indexOf(t.id),n.activeItems.splice(i,1),B(t,"active")),n.items.splice(s,1),n.lastQuery=null,!n.settings.persist&&n.userOptions.hasOwnProperty(o)&&n.removeOption(o,e),s<n.caretPos&&n.setCaret(n.caretPos-1),n.updateOriginalInput({silent:e}),n.refreshState(),n.positionDropdown(),n.trigger("item_remove",o,t)}createItem(t=null,e=(()=>{})){3===arguments.length&&(e=arguments[2]),"function"!=typeof e&&(e=()=>{});const n=this,i=n.caretPos;let o;if(t=t||n.inputValue(),!n.canCreate(t))return e(),!1;n.lock();let s=!1;const r=t=>{if(n.unlock(),!t||"object"!=typeof t)return e();const o=Y(t[n.settings.valueField]);if("string"!=typeof o)return e();n.setTextboxValue(),n.addOption(t,!0),n.setCaret(i),n.addItem(o),e(t),s=!0};return o="function"==typeof n.settings.create?n.settings.create.call(this,t,r):{[n.settings.labelField]:t,[n.settings.valueField]:t},s||r(o),!0}refreshItems(){const t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),n=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const i=t.wrapper.classList;var o;i.toggle("focus",t.isFocused),i.toggle("disabled",t.isDisabled),i.toggle("required",t.isRequired),i.toggle("invalid",!t.isValid),i.toggle("locked",n),i.toggle("full",e),i.toggle("input-active",t.isFocused&&!t.isInputHidden),i.toggle("dropdown-active",t.isOpen),i.toggle("has-options",(o=t.options,0===Object.keys(o).length)),i.toggle("has-items",t.items.length>0)}refreshValidityState(){const t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;let n,i;const o=e.input.querySelector('option[value=""]');if(e.is_select_tag){const s=[],r=e.input.querySelectorAll("option:checked").length;function l(t,n,i){return t||(t=D('<option value="'+tt(n)+'">'+tt(i)+"</option>")),t!=o&&e.input.append(t),s.push(t),(t!=o||r>0)&&(t.selected=!0),t}e.input.querySelectorAll("option:checked").forEach((t=>{t.selected=!1})),0==e.items.length&&"single"==e.settings.mode?l(o,"",""):e.items.forEach((t=>{n=e.options[t],i=n[e.settings.labelField]||"",s.includes(n.$option)?l(e.input.querySelector(`option[value="${lt(t)}"]:not(:checked)`),t,i):n.$option=l(n.$option,t,i)}))}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){const t=this;t.isLocked||t.isOpen||"multi"===t.settings.mode&&t.isFull()||(t.isOpen=!0,Q(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),M(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),M(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){const e=this,n=e.isOpen;t&&(e.setTextboxValue(),"single"===e.settings.mode&&e.items.length&&e.hideInput()),e.isOpen=!1,Q(e.focus_node,{"aria-expanded":"false"}),M(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),n&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if("body"!==this.settings.dropdownParent)return;const t=this.control,e=t.getBoundingClientRect(),n=t.offsetHeight+e.top+window.scrollY,i=e.left+window.scrollX;M(this.dropdown,{width:e.width+"px",top:n+"px",left:i+"px"})}clear(t){const e=this;if(!e.items.length)return;const n=e.controlChildren();E(n,(t=>{e.removeItem(t,!0)})),e.showInput(),t||e.updateOriginalInput(),e.trigger("clear")}insertAtCaret(t){const e=this,n=e.caretPos,i=e.control;i.insertBefore(t,i.children[n]||null),e.setCaret(n+1)}deleteSelection(t){let e,n;const i=this,o=t&&8===t.keyCode?-1:1,s={start:(l=i.control_input).selectionStart||0,length:(l.selectionEnd||0)-(l.selectionStart||0)},r=[];var l;if(i.activeItems.length)n=i.getItemById(W(i.activeItems,o)),e=K(n),o>0&&e++,E(i.activeItems.map((t=>this.getItemById(t))),(t=>r.push(t)));else if((i.isFocused||"single"===i.settings.mode)&&i.items.length){const t=i.controlChildren();let e;o<0&&0===s.start&&0===s.length?e=t[i.caretPos-1]:o>0&&s.start===i.inputValue().length&&(e=t[i.caretPos]),void 0!==e&&r.push(e)}if(!i.shouldDelete(r,t))return!1;for(it(t,!0),void 0!==e&&i.setCaret(e);r.length;)i.removeItem(r.pop());return i.showInput(),i.positionDropdown(),i.refreshOptions(!1),!0}shouldDelete(t,e){const n=t.map((t=>t.dataset.value));return!(!n.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete(n,e))}advanceSelection(t,e){const n=this;let i,o;n.rtl&&(t*=-1),n.inputValue().length||(st(J,e)||st("shiftKey",e)?(i=n.getLastActive(t),o=i?i.classList.contains("active")?n.getAdjacent(i,t,"item"):i:t>0?n.control_input.nextElementSibling:n.control_input.previousElementSibling,o&&(o.classList.contains("active")&&n.removeActiveItem(i),n.setActiveItemClass(o))):n.moveCaret(t))}moveCaret(t){}getLastActive(t){const e=this.control.querySelector(".last-active");if(e)return e;const n=this.control.querySelectorAll(".active");return n?W(n,t):void 0}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){const t=this;t.input.disabled=!0,t.control_input.disabled=!0,t.focus_node.tabIndex=-1,t.isDisabled=!0,this.close(),t.lock()}enable(){const t=this;t.input.disabled=!1,t.control_input.disabled=!1,t.focus_node.tabIndex=t.tabIndex,t.isDisabled=!1,t.unlock()}destroy(){const t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,B(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){let n,i;const o=this;if("function"!=typeof this.settings.render[t])return null;if(i=o.settings.render[t].call(this,e,tt),!i)return null;if(i=D(i),"option"===t||"option_create"===t?e[o.settings.disabledField]?Q(i,{"aria-disabled":"true"}):Q(i,{"data-selectable":""}):"optgroup"===t&&(n=e.group[o.settings.optgroupValueField],Q(i,{"data-group":n}),e.group[o.settings.disabledField]&&Q(i,{"data-disabled":""})),"option"===t||"item"===t){const n=Z(e[o.settings.valueField]);Q(i,{"data-value":n}),"item"===t?(H(i,o.settings.itemClass),Q(i,{"data-ts-item":"",id:`${e.$id}-item`})):(H(i,o.settings.optionClass),Q(i,{role:"option",id:e.$id}),e.$div=i,o.options[n]=e)}return i}_render(t,e){const n=this.render(t,e);if(null==n)throw"HTMLElement expected";return n}clearCache(){E(this.options,(t=>{t.$div&&(t.$div.remove(),delete t.$div)}))}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,n){const i=this,o=i[e];i[e]=function(){let e;"after"===t&&(e=o.apply(i,arguments));const s=n.apply(i,arguments);return"instead"===t?s:("before"===t&&(e=o.apply(i,arguments)),e)}}}return ut.define("change_listener",(function(){ot(this.input,"change",(()=>{this.sync()}))})),ut.define("checkbox_options",(function(){const t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;const n=function(t){setTimeout((()=>{const e=t.querySelector("input");e instanceof HTMLInputElement&&(t.classList.contains("selected")?e.checked=!0:e.checked=!1)}),1)};t.hook("after","setupTemplates",(()=>{const e=t.settings.render.option;t.settings.render.option=(n,i)=>{const o=D(e.call(t,n,i)),s=document.createElement("input");s.addEventListener("click",(function(t){it(t)})),s.type="checkbox";const r=Y(n[t.settings.valueField]);return r&&t.items.indexOf(r)>-1&&(s.checked=!0),o.prepend(s),o}})),t.on("item_remove",(e=>{const i=t.getOption(e);i&&(i.classList.remove("selected"),n(i))})),t.on("item_add",(e=>{const i=t.getOption(e);i&&n(i)})),t.hook("instead","onOptionSelect",((i,o)=>{if(o.classList.contains("selected"))return o.classList.remove("selected"),t.removeItem(o.dataset.value),t.refreshOptions(),void it(i,!0);e.call(t,i,o),n(o)}))})),ut.define("clear_button",(function(t){const e=this,n=Object.assign({className:"clear-button",title:"Clear All",html:t=>`<div class="${t.className}" title="${t.title}">&#10799;</div>`},t);e.on("initialize",(()=>{const t=D(n.html(n));t.addEventListener("click",(t=>{e.isDisabled||(e.clear(),"single"===e.settings.mode&&e.settings.allowEmptyOption&&e.addItem(""),t.preventDefault(),t.stopPropagation())})),e.control.appendChild(t)}))})),ut.define("drag_drop",(function(){const t=this;if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"!==t.settings.mode)return;const e=t.lock,n=t.unlock;t.hook("instead","lock",(()=>{const n=$(t.control).data("sortable");return n&&n.disable(),e.call(t)})),t.hook("instead","unlock",(()=>{const e=$(t.control).data("sortable");return e&&e.enable(),n.call(t)})),t.on("initialize",(()=>{const e=$(t.control).sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:(t,n)=>{n.placeholder.css("width",n.helper.css("width")),e.css({overflow:"visible"})},stop:()=>{e.css({overflow:"hidden"});const n=[];e.children("[data-value]").each((function(){this.dataset.value&&n.push(this.dataset.value)})),t.setValue(n)}})}))})),ut.define("dropdown_header",(function(t){const e=this,n=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:t=>'<div class="'+t.headerClass+'"><div class="'+t.titleRowClass+'"><span class="'+t.labelClass+'">'+t.title+'</span><a class="'+t.closeClass+'">&times;</a></div></div>'},t);e.on("initialize",(()=>{const t=D(n.html(n)),i=t.querySelector("."+n.closeClass);i&&i.addEventListener("click",(t=>{it(t,!0),e.close()})),e.dropdown.insertBefore(t,e.dropdown.firstChild)}))})),ut.define("caret_position",(function(){const t=this;t.hook("instead","setCaret",(e=>{"single"!==t.settings.mode&&t.control.contains(t.control_input)?(e=Math.max(0,Math.min(t.items.length,e)))==t.caretPos||t.isPending||t.controlChildren().forEach(((n,i)=>{i<e?t.control_input.insertAdjacentElement("beforebegin",n):t.control.appendChild(n)})):e=t.items.length,t.caretPos=e})),t.hook("instead","moveCaret",(e=>{if(!t.isFocused)return;const n=t.getLastActive(e);if(n){const i=K(n);t.setCaret(e>0?i+1:i),t.setActiveItem(),B(n,"last-active")}else t.setCaret(t.caretPos+e)}))})),ut.define("dropdown_input",(function(){const t=this;t.settings.shouldOpen=!0,t.hook("before","setup",(()=>{t.focus_node=t.control,H(t.control_input,"dropdown-input");const e=D('<div class="dropdown-input-wrap">');e.append(t.control_input),t.dropdown.insertBefore(e,t.dropdown.firstChild);const n=D('<input class="items-placeholder" tabindex="-1" />');n.placeholder=t.settings.placeholder||"",t.control.append(n)})),t.on("initialize",(()=>{t.control_input.addEventListener("keydown",(e=>{switch(e.keyCode){case 27:return t.isOpen&&(it(e,!0),t.close()),void t.clearActiveItems();case 9:t.focus_node.tabIndex=-1}return t.onKeyDown.call(t,e)})),t.on("blur",(()=>{t.focus_node.tabIndex=t.isDisabled?-1:t.tabIndex})),t.on("dropdown_open",(()=>{t.control_input.focus()}));const e=t.onBlur;t.hook("instead","onBlur",(n=>{if(!n||n.relatedTarget!=t.control_input)return e.call(t)})),ot(t.control_input,"blur",(()=>t.onBlur())),t.hook("before","close",(()=>{t.isOpen&&t.focus_node.focus({preventScroll:!0})}))}))})),ut.define("input_autogrow",(function(){const t=this;t.on("initialize",(()=>{const e=document.createElement("span"),n=t.control_input;e.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",t.wrapper.appendChild(e);const i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const t of i)e.style[t]=n.style[t];const o=()=>{e.textContent=n.value,n.style.width=e.clientWidth+"px"};o(),t.on("update item_add item_remove",o),ot(n,"input",o),ot(n,"keyup",o),ot(n,"blur",o),ot(n,"update",o)}))})),ut.define("no_backspace_delete",(function(){const t=this,e=t.deleteSelection;this.hook("instead","deleteSelection",(n=>!!t.activeItems.length&&e.call(t,n)))})),ut.define("no_active_items",(function(){this.hook("instead","setActiveItem",(()=>{})),this.hook("instead","selectAll",(()=>{}))})),ut.define("optgroup_columns",(function(){const t=this,e=t.onKeyDown;t.hook("instead","onKeyDown",(n=>{let i;if(!t.isOpen||37!==n.keyCode&&39!==n.keyCode)return e.call(t,n);t.ignoreHover=!0,i=z(t.activeOption,"[data-group]");const o=K(t.activeOption,"[data-selectable]");if(!i)return;if(i=37===n.keyCode?i.previousSibling:i.nextSibling,!i)return;const s=i.querySelectorAll("[data-selectable]"),r=s[Math.min(s.length-1,o)];r&&t.setActiveOption(r)}))})),ut.define("remove_button",(function(t){const e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},t),n=this;if(!e.append)return;const i='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+tt(e.title)+'">'+e.label+"</a>";n.hook("after","setupTemplates",(()=>{const t=n.settings.render.item;n.settings.render.item=(e,o)=>{const s=D(t.call(n,e,o)),r=D(i);return s.appendChild(r),ot(r,"mousedown",(t=>{it(t,!0)})),ot(r,"click",(t=>{it(t,!0),n.isLocked||n.shouldDelete([s],t)&&(n.removeItem(s),n.refreshOptions(!1),n.inputState())})),s}}))})),ut.define("restore_on_backspace",(function(t){const e=this,n=Object.assign({text:t=>t[e.settings.labelField]},t);e.on("item_remove",(function(t){if(e.isFocused&&""===e.control_input.value.trim()){const i=e.options[t];i&&e.setTextboxValue(n.text.call(e,i))}}))})),ut.define("virtual_scroll",(function(){const t=this,e=t.canLoad,n=t.clearActiveOption,i=t.loadCallback;let o,s,r={},l=!1,a=[];if(t.settings.shouldLoadMore||(t.settings.shouldLoadMore=()=>{if(o.clientHeight/(o.scrollHeight-o.scrollTop)>.9)return!0;if(t.activeOption){const e=t.selectable();if(Array.from(e).indexOf(t.activeOption)>=e.length-2)return!0}return!1}),!t.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";t.settings.sortField=[{field:"$order"},{field:"$score"}];const c=e=>!("number"==typeof t.settings.maxOptions&&o.children.length>=t.settings.maxOptions||!(e in r)||!r[e]),d=(e,n)=>t.items.indexOf(n)>=0||a.indexOf(n)>=0;t.setNextUrl=(t,e)=>{r[t]=e},t.getUrl=e=>{if(e in r){const t=r[e];return r[e]=!1,t}return r={},t.settings.firstUrl.call(t,e)},t.hook("instead","clearActiveOption",(()=>{if(!l)return n.call(t)})),t.hook("instead","canLoad",(n=>n in r?c(n):e.call(t,n))),t.hook("instead","loadCallback",((e,n)=>{if(l){if(s){const n=e[0];void 0!==n&&(s.dataset.value=n[t.settings.valueField])}}else t.clearOptions(d);i.call(t,e,n),l=!1})),t.hook("after","refreshOptions",(()=>{const e=t.lastValue;let n;c(e)?(n=t.render("loading_more",{query:e}),n&&(n.setAttribute("data-selectable",""),s=n)):e in r&&!o.querySelector(".no-results")&&(n=t.render("no_more_results",{query:e})),n&&(H(n,t.settings.optionClass),o.append(n))})),t.on("initialize",(()=>{a=Object.keys(t.options),o=t.dropdown_content,t.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},t.settings.render),o.addEventListener("scroll",(()=>{t.settings.shouldLoadMore.call(t)&&c(t.lastValue)&&(l||(l=!0,t.load.call(t,t.lastValue)))}))}))})),ut}()}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=window.jQuery;function e(e,n){void 0===n&&(n=!1);var i=t("#gform_"+e),o="input_";n&&(o="filter_"),t("#wpwrap #entry_form").length&&(i=t("#entry_form")),n&&(i=t(".gv-widget-search"));for(var s=function(e){var n,i=/^(?:checkbox|radio)$/i,o=/\r?\n/g,s=/^(?:submit|button|image|reset|file)$/i,r=/^(?:input|select|textarea|keygen)/i,l=t.makeArray(e.prop("elements")).filter((function(t){var e=t.type;return t.name&&r.test(t.nodeName)&&!s.test(e)&&(t.checked||!i.test(e))}));return(n=[]).concat.apply(n,l.map((function(e){if(null!=e){var n=t(e).val();return Array.isArray(n)?0===n.length?{name:e.name,value:"",el:e}:t.map(n,(function(t){return{name:e.name,value:null==t?void 0:t.replace(o,"\n"),el:e}})):{name:e.name,value:null==n?void 0:n.replace(o,"\n"),el:e}}}))).filter(Boolean)}(i).filter((function(t){var e;return!(!t||0!==(null===(e=t.name)||void 0===e?void 0:e.indexOf(o)))})),r={},l=0,a=s;l<a.length;l++){var c=a[l],d=c.value,u=c.el,p=c.name.replace(o,"");("radio"!==(null==u?void 0:u.type)&&"checkbox"!==(null==u?void 0:u.type)||(null==u?void 0:u.checked))&&(-1!==p.indexOf("[]")?((p=p.replace("[]",""))in r||(r[p]=[]),r[p].push(d)):r[p]=d)}return r}var i=n(505),o=n.n(i);function s(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function r(t){return t instanceof s(t).Element||t instanceof Element}function l(t){return t instanceof s(t).HTMLElement||t instanceof HTMLElement}function a(t){return"undefined"!=typeof ShadowRoot&&(t instanceof s(t).ShadowRoot||t instanceof ShadowRoot)}var c=Math.max,d=Math.min,u=Math.round;function p(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function h(){return!/^((?!chrome|android).)*safari/i.test(p())}function f(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),o=1,a=1;e&&l(t)&&(o=t.offsetWidth>0&&u(i.width)/t.offsetWidth||1,a=t.offsetHeight>0&&u(i.height)/t.offsetHeight||1);var c=(r(t)?s(t):window).visualViewport,d=!h()&&n,p=(i.left+(d&&c?c.offsetLeft:0))/o,f=(i.top+(d&&c?c.offsetTop:0))/a,g=i.width/o,m=i.height/a;return{width:g,height:m,top:f,right:p+g,bottom:f+m,left:p,x:p,y:f}}function g(t){var e=s(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function m(t){return t?(t.nodeName||"").toLowerCase():null}function v(t){return((r(t)?t.ownerDocument:t.document)||window.document).documentElement}function y(t){return f(v(t)).left+g(t).scrollLeft}function b(t){return s(t).getComputedStyle(t)}function w(t){var e=b(t),n=e.overflow,i=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}function O(t,e,n){void 0===n&&(n=!1);var i,o,r=l(e),a=l(e)&&function(t){var e=t.getBoundingClientRect(),n=u(e.width)/t.offsetWidth||1,i=u(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),c=v(e),d=f(t,a,n),p={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(r||!r&&!n)&&(("body"!==m(e)||w(c))&&(p=(i=e)!==s(i)&&l(i)?{scrollLeft:(o=i).scrollLeft,scrollTop:o.scrollTop}:g(i)),l(e)?((h=f(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):c&&(h.x=y(c))),{x:d.left+p.scrollLeft-h.x,y:d.top+p.scrollTop-h.y,width:d.width,height:d.height}}function x(t){var e=f(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function _(t){return"html"===m(t)?t:t.assignedSlot||t.parentNode||(a(t)?t.host:null)||v(t)}function I(t){return["html","body","#document"].indexOf(m(t))>=0?t.ownerDocument.body:l(t)&&w(t)?t:I(_(t))}function S(t,e){var n;void 0===e&&(e=[]);var i=I(t),o=i===(null==(n=t.ownerDocument)?void 0:n.body),r=s(i),l=o?[r].concat(r.visualViewport||[],w(i)?i:[]):i,a=e.concat(l);return o?a:a.concat(S(_(l)))}function A(t){return["table","td","th"].indexOf(m(t))>=0}function C(t){return l(t)&&"fixed"!==b(t).position?t.offsetParent:null}function k(t){for(var e=s(t),n=C(t);n&&A(n)&&"static"===b(n).position;)n=C(n);return n&&("html"===m(n)||"body"===m(n)&&"static"===b(n).position)?e:n||function(t){var e=/firefox/i.test(p());if(/Trident/i.test(p())&&l(t)&&"fixed"===b(t).position)return null;var n=_(t);for(a(n)&&(n=n.host);l(n)&&["html","body"].indexOf(m(n))<0;){var i=b(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}var F="top",L="bottom",E="right",j="left",P="auto",T=[F,L,E,j],D="start",V="end",$="viewport",q="popper",M=T.reduce((function(t,e){return t.concat([e+"-"+D,e+"-"+V])}),[]),H=[].concat(T,[P]).reduce((function(t,e){return t.concat([e,e+"-"+D,e+"-"+V])}),[]),B=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function N(t){var e=new Map,n=new Set,i=[];function o(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&o(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||o(t)})),i}var R={placement:"bottom",modifiers:[],strategy:"absolute"};function z(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function W(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,o=e.defaultOptions,s=void 0===o?R:o;return function(t,e,n){void 0===n&&(n=s);var o,l,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},R,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],d=!1,u={state:a,setOptions:function(n){var o="function"==typeof n?n(a.options):n;p(),a.options=Object.assign({},s,a.options,o),a.scrollParents={reference:r(t)?S(t):t.contextElement?S(t.contextElement):[],popper:S(e)};var l,d,h=function(t){var e=N(t);return B.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((l=[].concat(i,a.options.modifiers),d=l.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(d).map((function(t){return d[t]}))));return a.orderedModifiers=h.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,o=t.effect;if("function"==typeof o){var s=o({state:a,name:e,instance:u,options:i});c.push(s||function(){})}})),u.update()},forceUpdate:function(){if(!d){var t=a.elements,e=t.reference,n=t.popper;if(z(e,n)){a.rects={reference:O(e,k(n),"fixed"===a.options.strategy),popper:x(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var o=a.orderedModifiers[i],s=o.fn,r=o.options,l=void 0===r?{}:r,c=o.name;"function"==typeof s&&(a=s({state:a,options:l,name:c,instance:u})||a)}else a.reset=!1,i=-1}}},update:(o=function(){return new Promise((function(t){u.forceUpdate(),t(a)}))},function(){return l||(l=new Promise((function(t){Promise.resolve().then((function(){l=void 0,t(o())}))}))),l}),destroy:function(){p(),d=!0}};if(!z(t,e))return u;function p(){c.forEach((function(t){return t()})),c=[]}return u.setOptions(n).then((function(t){!d&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var K={passive:!0};function Q(t){return t.split("-")[0]}function U(t){return t.split("-")[1]}function G(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function J(t){var e,n=t.reference,i=t.element,o=t.placement,s=o?Q(o):null,r=o?U(o):null,l=n.x+n.width/2-i.width/2,a=n.y+n.height/2-i.height/2;switch(s){case F:e={x:l,y:n.y-i.height};break;case L:e={x:l,y:n.y+n.height};break;case E:e={x:n.x+n.width,y:a};break;case j:e={x:n.x-i.width,y:a};break;default:e={x:n.x,y:n.y}}var c=s?G(s):null;if(null!=c){var d="y"===c?"height":"width";switch(r){case D:e[c]=e[c]-(n[d]/2-i[d]/2);break;case V:e[c]=e[c]+(n[d]/2-i[d]/2)}}return e}var X={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Y(t){var e,n=t.popper,i=t.popperRect,o=t.placement,r=t.variation,l=t.offsets,a=t.position,c=t.gpuAcceleration,d=t.adaptive,p=t.roundOffsets,h=t.isFixed,f=l.x,g=void 0===f?0:f,m=l.y,y=void 0===m?0:m,w="function"==typeof p?p({x:g,y}):{x:g,y};g=w.x,y=w.y;var O=l.hasOwnProperty("x"),x=l.hasOwnProperty("y"),_=j,I=F,S=window;if(d){var A=k(n),C="clientHeight",P="clientWidth";A===s(n)&&"static"!==b(A=v(n)).position&&"absolute"===a&&(C="scrollHeight",P="scrollWidth"),(o===F||(o===j||o===E)&&r===V)&&(I=L,y-=(h&&A===S&&S.visualViewport?S.visualViewport.height:A[C])-i.height,y*=c?1:-1),o!==j&&(o!==F&&o!==L||r!==V)||(_=E,g-=(h&&A===S&&S.visualViewport?S.visualViewport.width:A[P])-i.width,g*=c?1:-1)}var T,D=Object.assign({position:a},d&&X),$=!0===p?function(t,e){var n=t.x,i=t.y,o=e.devicePixelRatio||1;return{x:u(n*o)/o||0,y:u(i*o)/o||0}}({x:g,y},s(n)):{x:g,y};return g=$.x,y=$.y,c?Object.assign({},D,((T={})[I]=x?"0":"",T[_]=O?"0":"",T.transform=(S.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",T)):Object.assign({},D,((e={})[I]=x?y+"px":"",e[_]=O?g+"px":"",e.transform="",e))}var Z={left:"right",right:"left",bottom:"top",top:"bottom"};function tt(t){return t.replace(/left|right|bottom|top/g,(function(t){return Z[t]}))}var et={start:"end",end:"start"};function nt(t){return t.replace(/start|end/g,(function(t){return et[t]}))}function it(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&a(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ot(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function st(t,e,n){return e===$?ot(function(t,e){var n=s(t),i=v(t),o=n.visualViewport,r=i.clientWidth,l=i.clientHeight,a=0,c=0;if(o){r=o.width,l=o.height;var d=h();(d||!d&&"fixed"===e)&&(a=o.offsetLeft,c=o.offsetTop)}return{width:r,height:l,x:a+y(t),y:c}}(t,n)):r(e)?function(t,e){var n=f(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):ot(function(t){var e,n=v(t),i=g(t),o=null==(e=t.ownerDocument)?void 0:e.body,s=c(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),r=c(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-i.scrollLeft+y(t),a=-i.scrollTop;return"rtl"===b(o||n).direction&&(l+=c(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:r,x:l,y:a}}(v(t)))}function rt(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function lt(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function at(t,e){void 0===e&&(e={});var n=e,i=n.placement,o=void 0===i?t.placement:i,s=n.strategy,a=void 0===s?t.strategy:s,u=n.boundary,p=void 0===u?"clippingParents":u,h=n.rootBoundary,g=void 0===h?$:h,y=n.elementContext,w=void 0===y?q:y,O=n.altBoundary,x=void 0!==O&&O,I=n.padding,A=void 0===I?0:I,C=rt("number"!=typeof A?A:lt(A,T)),j=w===q?"reference":q,P=t.rects.popper,D=t.elements[x?j:w],V=function(t,e,n,i){var o="clippingParents"===e?function(t){var e=S(_(t)),n=["absolute","fixed"].indexOf(b(t).position)>=0&&l(t)?k(t):t;return r(n)?e.filter((function(t){return r(t)&&it(t,n)&&"body"!==m(t)})):[]}(t):[].concat(e),s=[].concat(o,[n]),a=s[0],u=s.reduce((function(e,n){var o=st(t,n,i);return e.top=c(o.top,e.top),e.right=d(o.right,e.right),e.bottom=d(o.bottom,e.bottom),e.left=c(o.left,e.left),e}),st(t,a,i));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}(r(D)?D:D.contextElement||v(t.elements.popper),p,g,a),M=f(t.elements.reference),H=J({reference:M,element:P,strategy:"absolute",placement:o}),B=ot(Object.assign({},P,H)),N=w===q?B:M,R={top:V.top-N.top+C.top,bottom:N.bottom-V.bottom+C.bottom,left:V.left-N.left+C.left,right:N.right-V.right+C.right},z=t.modifiersData.offset;if(w===q&&z){var W=z[o];Object.keys(R).forEach((function(t){var e=[E,L].indexOf(t)>=0?1:-1,n=[F,L].indexOf(t)>=0?"y":"x";R[t]+=W[n]*e}))}return R}function ct(t,e,n){return c(t,d(e,n))}function dt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ut(t){return[F,E,L,j].some((function(e){return t[e]>=0}))}var pt=W({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,o=i.scroll,r=void 0===o||o,l=i.resize,a=void 0===l||l,c=s(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&d.forEach((function(t){t.addEventListener("scroll",n.update,K)})),a&&c.addEventListener("resize",n.update,K),function(){r&&d.forEach((function(t){t.removeEventListener("scroll",n.update,K)})),a&&c.removeEventListener("resize",n.update,K)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=J({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,o=void 0===i||i,s=n.adaptive,r=void 0===s||s,l=n.roundOffsets,a=void 0===l||l,c={placement:Q(e.placement),variation:U(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Y(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:a})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Y(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},o=e.elements[t];l(o)&&m(o)&&(Object.assign(o.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?o.removeAttribute(t):o.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],o=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});l(i)&&m(i)&&(Object.assign(i.style,s),Object.keys(o).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,o=n.offset,s=void 0===o?[0,0]:o,r=H.reduce((function(t,n){return t[n]=function(t,e,n){var i=Q(t),o=[j,F].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},e,{placement:t})):n,r=s[0],l=s[1];return r=r||0,l=(l||0)*o,[j,E].indexOf(i)>=0?{x:l,y:r}:{x:r,y:l}}(n,e.rects,s),t}),{}),l=r[e.placement],a=l.x,c=l.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=r}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var o=n.mainAxis,s=void 0===o||o,r=n.altAxis,l=void 0===r||r,a=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,g=n.allowedAutoPlacements,m=e.options.placement,v=Q(m),y=a||(v!==m&&f?function(t){if(Q(t)===P)return[];var e=tt(t);return[nt(t),e,nt(e)]}(m):[tt(m)]),b=[m].concat(y).reduce((function(t,n){return t.concat(Q(n)===P?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,o=n.boundary,s=n.rootBoundary,r=n.padding,l=n.flipVariations,a=n.allowedAutoPlacements,c=void 0===a?H:a,d=U(i),u=d?l?M:M.filter((function(t){return U(t)===d})):T,p=u.filter((function(t){return c.indexOf(t)>=0}));0===p.length&&(p=u);var h=p.reduce((function(e,n){return e[n]=at(t,{placement:n,boundary:o,rootBoundary:s,padding:r})[Q(n)],e}),{});return Object.keys(h).sort((function(t,e){return h[t]-h[e]}))}(e,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:f,allowedAutoPlacements:g}):n)}),[]),w=e.rects.reference,O=e.rects.popper,x=new Map,_=!0,I=b[0],S=0;S<b.length;S++){var A=b[S],C=Q(A),k=U(A)===D,V=[F,L].indexOf(C)>=0,$=V?"width":"height",q=at(e,{placement:A,boundary:d,rootBoundary:u,altBoundary:p,padding:c}),B=V?k?E:j:k?L:F;w[$]>O[$]&&(B=tt(B));var N=tt(B),R=[];if(s&&R.push(q[C]<=0),l&&R.push(q[B]<=0,q[N]<=0),R.every((function(t){return t}))){I=A,_=!1;break}x.set(A,R)}if(_)for(var z=function(t){var e=b.find((function(e){var n=x.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return I=e,"break"},W=f?3:1;W>0&&"break"!==z(W);W--);e.placement!==I&&(e.modifiersData[i]._skip=!0,e.placement=I,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,o=n.mainAxis,s=void 0===o||o,r=n.altAxis,l=void 0!==r&&r,a=n.boundary,u=n.rootBoundary,p=n.altBoundary,h=n.padding,f=n.tether,g=void 0===f||f,m=n.tetherOffset,v=void 0===m?0:m,y=at(e,{boundary:a,rootBoundary:u,padding:h,altBoundary:p}),b=Q(e.placement),w=U(e.placement),O=!w,_=G(b),I="x"===_?"y":"x",S=e.modifiersData.popperOffsets,A=e.rects.reference,C=e.rects.popper,P="function"==typeof v?v(Object.assign({},e.rects,{placement:e.placement})):v,T="number"==typeof P?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),V=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,$={x:0,y:0};if(S){if(s){var q,M="y"===_?F:j,H="y"===_?L:E,B="y"===_?"height":"width",N=S[_],R=N+y[M],z=N-y[H],W=g?-C[B]/2:0,K=w===D?A[B]:C[B],J=w===D?-C[B]:-A[B],X=e.elements.arrow,Y=g&&X?x(X):{width:0,height:0},Z=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},tt=Z[M],et=Z[H],nt=ct(0,A[B],Y[B]),it=O?A[B]/2-W-nt-tt-T.mainAxis:K-nt-tt-T.mainAxis,ot=O?-A[B]/2+W+nt+et+T.mainAxis:J+nt+et+T.mainAxis,st=e.elements.arrow&&k(e.elements.arrow),rt=st?"y"===_?st.clientTop||0:st.clientLeft||0:0,lt=null!=(q=null==V?void 0:V[_])?q:0,dt=N+ot-lt,ut=ct(g?d(R,N+it-lt-rt):R,N,g?c(z,dt):z);S[_]=ut,$[_]=ut-N}if(l){var pt,ht="x"===_?F:j,ft="x"===_?L:E,gt=S[I],mt="y"===I?"height":"width",vt=gt+y[ht],yt=gt-y[ft],bt=-1!==[F,j].indexOf(b),wt=null!=(pt=null==V?void 0:V[I])?pt:0,Ot=bt?vt:gt-A[mt]-C[mt]-wt+T.altAxis,xt=bt?gt+A[mt]+C[mt]-wt-T.altAxis:yt,_t=g&&bt?function(t,e,n){var i=ct(t,e,n);return i>n?n:i}(Ot,gt,xt):ct(g?Ot:vt,gt,g?xt:yt);S[I]=_t,$[I]=_t-gt}e.modifiersData[i]=$}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,o=t.options,s=n.elements.arrow,r=n.modifiersData.popperOffsets,l=Q(n.placement),a=G(l),c=[j,E].indexOf(l)>=0?"height":"width";if(s&&r){var d=function(t,e){return rt("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:lt(t,T))}(o.padding,n),u=x(s),p="y"===a?F:j,h="y"===a?L:E,f=n.rects.reference[c]+n.rects.reference[a]-r[a]-n.rects.popper[c],g=r[a]-n.rects.reference[a],m=k(s),v=m?"y"===a?m.clientHeight||0:m.clientWidth||0:0,y=f/2-g/2,b=d[p],w=v-u[c]-d[h],O=v/2-u[c]/2+y,_=ct(b,O,w),I=a;n.modifiersData[i]=((e={})[I]=_,e.centerOffset=_-O,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&it(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,o=e.rects.popper,s=e.modifiersData.preventOverflow,r=at(e,{elementContext:"reference"}),l=at(e,{altBoundary:!0}),a=dt(r,i),c=dt(l,o,s),d=ut(a),u=ut(c);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}}]}),ht=window.jQuery,ft=function(){function t(t){var e=this;this.ajaxCache={},this.formId=t.formId,this.fieldId=t.fieldId,this.lazyLoad=t.lazyLoad,this.usingSearchValue=t.usingSearchValue,this.hasImageChoices=t.hasImageChoices,this.fieldType=t.fieldType,this.minSearchLength=t.minSearchLength,this.ignoreEmptySearchValue=t.ignoreEmptySearchValue,this.placeholder=t.placeholder,this.initTomSelect(),jQuery(document).on("gppa_updated_batch_fields",(function(){e.initTomSelect()}))}return t.prototype.initTomSelect=function(){for(var t,e=0,n=this.getSelectFields();e<n.length;e++){var i=n[e],s=ht(i);if(s.siblings(".ts-wrapper").length||!s.length||s.hasClass("tomselected"))return;if(!(null==i?void 0:i.id))return;var r=null===(t=null==i?void 0:i.id)||void 0===t?void 0:t.split("_");r.shift();var l="GPAdvancedSelect_".concat(r.join("_"));window[l]=new(o())("#".concat(i.id),this.tomSelectSettings(l))}},t.prototype.getSelectFields=function(){if("address"===this.fieldType){var t="#field_".concat(this.formId,"_").concat(this.fieldId);return ht(t).find("select").toArray()}var e="#input_".concat(this.formId,"_").concat(this.fieldId);return ht(e).toArray()},t.prototype.tomSelectSettings=function(t){var e,n,i,o=this,s=this,r={plugins:{change_listener:{}},valueField:"id",labelField:"text",openOnFocus:!0,loadThrottle:0,maxOptions:void 0,searchField:["text"],render:{no_results:function(){var t;return'<div class="no-results">'.concat(null===(t=window.GPADVS.strings)||void 0===t?void 0:t.no_results_found,"</div>")}},onInitialize:function(){var t=[];ht(this.control).closest(".tingle-modal-box").length&&t.push({name:"preventOverflow",options:{boundary:ht(this.control).closest(".gform_wrapper")[0]}}),this.popper=pt(this.control,this.dropdown,{modifiers:t})},onDropdownOpen:function(){this.popper.update()},onLoad:function(){this.popper.update()},onChange:function(){this.popper.update()}};return"multiselect"===s.fieldType&&(null===(e=r.plugins)||void 0===e||(e.remove_button={title:null===(n=window.GPADVS.strings)||void 0===n?void 0:n.remove_this_item})),this.placeholder&&(r.placeholder=this.placeholder),this.hasImageChoices&&(r.render={option:function(t,e){return t.imageSrc?'<div><img src="'.concat(t.imageSrc,'" class="gpadvs-image">').concat(t.text,"</div>"):"<div>".concat(t.text,"</div>")},item:function(t,e){return t.imageSrc?'<div><img src="'.concat(t.imageSrc,'" class="gpadvs-image">').concat(t.text,"</div>"):"<div>".concat(t.text,"</div>")}}),this.lazyLoad&&(this.usingSearchValue&&(r.searchField=[]),null===(i=r.plugins)||void 0===i||(i.virtual_scroll={}),r.firstUrl=function(t){return window.GPPA.AJAXURL+"?action=gp_advanced_select_get_gppa_results"},this.usingSearchValue?r.shouldLoad=function(e){var n,i=o.ignoreEmptySearchValue&&0===e.length||e.length>=o.minSearchLength;return i||null===(n=window[t])||void 0===n||n.clearOptions(),i}:r.shouldLoad=function(){return!0},this.usingSearchValue&&!this.ignoreEmptySearchValue||(r.preload="focus"),r.load=function(t,e){s.loadResults.call(this,t,e,s)}),window.gform.applyFilters("gpadvs_settings",r,s,t)},t.prototype.loadResults=function(t,n,i){var o=this,s=this.getUrl(t),r=ht.ajax({url:s,contentType:"application/json",dataType:"json",method:"POST",cache:!1,data:JSON.stringify({fieldId:i.fieldId,security:window.GPPA.NONCE,term:t,"form-id":i.formId,"field-values":e(i.formId,!!window.gppaForms[i.formId].gravityViewMeta)})});r.then((function(e){var i;if(null===(i=null==e?void 0:e.pagination)||void 0===i?void 0:i.nextPage){var s=e.pagination.nextPage;o.setNextUrl(t,"".concat(window.GPPA.AJAXURL,"?action=gp_advanced_select_get_gppa_results&page=").concat(s))}n(e.results)})),r.fail((function(){return n()}))},t}();window.GPAdvancedSelect=ft})()})();
//# sourceMappingURL=gp-advanced-select.js.map