!function(e){"use strict";var t=window.houzez||{};t.OSMUtils=function(){let e="",t="",a="",n="",o=new Array,i=0,r=0,l=null,s="",u="no",c="",p=!1,d=0;"undefined"!=typeof houzez_vars&&(t=houzez_vars.admin_url+"admin-ajax.php",a=houzez_vars.user_id,n=houzez_vars.not_found,e=houzez_vars.thousands_separator,s=houzez_vars.infoWindowPlac,u=houzez_vars.markerPricePins,c=houzez_vars.api_mapbox,d=parseInt(houzez_vars.houzez_default_radius),p="yes"===houzez_vars.houzez_rtl);return{init:()=>{},getAjaxUrl:()=>t,getIsMobile:()=>!!window.matchMedia("(max-width: 991px)").matches||!0===navigator.userAgentData?.mobile||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),getTileLayer:()=>L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),getUserID:()=>a,getNotFound:()=>n,getThousandsSeparator:()=>e,getInfoWindowPlac:()=>s,getMarkerPricePins:()=>u,getMapboxAccessToken:()=>c,getMapClusterEnable:()=>1,getClustererZoom:()=>12,getCloseIcon:()=>"",getMarkerSpiderfier:()=>0,getMapType:()=>"roadmap",getGoogleMapStyle:()=>"",getDefaultLat:()=>25.68654,getDefaultLng:()=>-80.431345,getHouzezRtl:()=>p,debounce:(e,t)=>{let a,n=0;return function(...o){const i=this;Date.now();clearTimeout(a),a=setTimeout(()=>{n=Date.now(),e.apply(i,o)},t)}},getDefaultRadius:()=>d,getClusterIcon:()=>"",getMarkers:()=>o,getCurrentMarker:()=>i,getCurrentMarkerId:()=>r,getActivePopup:()=>l,setCurrentMarker:e=>{i=e},setCurrentMarkerId:e=>{r=e},setActivePopup:e=>{l=e},setMarkers:e=>{o=e}}}(),t.OSMMap=function(){let a,n,o=new Array,i=[],r="",l=1,s=12,u="",c="",p=0,d=0,m=0,g="no",h="",f="roadmap",z=!1,_=!1,v=null,y=0,b=0,w=12,k=18,S=0,M=0,C="",T="",O="",P="",I=!1;"undefined"!=typeof houzez_vars&&(C=houzez_vars.admin_url+"admin-ajax.php",T=houzez_vars.user_id,O=houzez_vars.not_found,P=houzez_vars.thousands_separator,M=parseInt(houzez_vars.is_halfmap),S=parseInt(houzez_vars.auto_load_map_listings));const j=function(){for(var e=0;e<o.length;e++)a.removeLayer(o[e]);o=[],n&&a.removeLayer(n)},x=function(t,a){if(1!==S)return;v&&(clearTimeout(v),v=null);const n=e("#houzez-map-message"),o=n.find(".map-info-message");if(t<a){const e=houzez_vars.map_show_some.replace("%s",t).replace("%s",a),i=houzez_vars.zoom_in_show_more;o.html(e+"<br>"+i),n.addClass("show")}else{const e=houzez_vars.map_show_all.replace("%s",a);o.html(e),n.addClass("show")}v=setTimeout(function(){n.removeClass("show")},3e3)},A=function(e){for(var t=[],a=0;a<e.length;a++)e[a].latitude&&e[a].longitude&&t.push([e[a].latitude,e[a].longitude]);return t},U=function(){if(!a||0===o.length)return;const e=L.latLngBounds();if(o.forEach(function(t){e.extend(t.getLatLng())}),I=!0,e.getNorthEast().equals(e.getSouthWest())){const t=e.getCenter();return a.setView(t,w,{animate:!1}),void setTimeout(()=>{I=!1},100)}a.getBoundsZoom(e)>w?a.setView(e.getCenter(),w,{animate:!1}):a.fitBounds(e,{animate:!1,padding:[50,50]}),setTimeout(()=>{I=!1},100)},Z=function(e,t,a=!1){var i;A(e);1==l&&(n=new L.MarkerClusterGroup({iconCreateFunction:function(e){var t='<div class="houzez-osm-cluster">'+e.getAllChildMarkers().length+"</div>";return L.divIcon({html:t,className:"mycluster",iconSize:L.point(47,47)})},spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0}));for(var r=0;r<e.length;r++){const a=parseFloat(e[r].latitude),_=parseFloat(e[r].longitude);if(!e[r].latitude||!e[r].longitude||isNaN(a)||isNaN(_)||a<-90||a>90||_<-180||_>180)continue;var s=e[r];let v=s.marker_color;var u=L.latLng(a,_),p={riseOnHover:!0};if(s.title&&(p.title=s.title),"yes"==g){var d='<div data-id="'+s.property_id+'" class="osm-marker map-marker-label"'+(v?' style="background-color: '+v+"; border-color: "+v+'; color: #ffffff;"':"")+">"+s.pricePin+"</div>",m=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:d});i=1==l?new L.Marker(u,{icon:m}):L.marker(u,{icon:m}).addTo(t)}else{if(s.marker){var h={iconUrl:s.marker,iconSize:[44,56],iconAnchor:[20,57],popupAnchor:[1,-57]};s.retinaMarker&&(h.iconRetinaUrl=s.retinaMarker),p.icon=L.icon(h)}i=1==l?new L.Marker(u,p):L.marker(u,p).addTo(t)}1==l&&n.addLayer(i);var f=document.createElement("div");f.className="property-info-window";var z="";e[r].thumbnail?z+='<div class="info-window-image">'+e[r].featured_label+'<a target="'+e[r].link_target+'" href="'+e[r].url+'"><img class="img-fluid listing-thumbnail" src="'+e[r].thumbnail+'" alt="'+e[r].title+'"/></a></div>':z+='<div class="info-window-image">'+e[r].featured_label+'<a target="'+e[r].link_target+'" href="'+e[r].url+'"><img class="img-fluid listing-thumbnail" src="'+c+'" alt="'+e[r].title+'"/></a></div>',z+='<div class="info-content" style="padding:10px;">',e[r].price&&(z+='<div class="info-window-price">'+e[r].price+"</div>"),z+=e[r].meta,e[r].property_type&&(z+='<div class="info-window-property-type">'+e[r].property_type+"</div>"),z+=e[r].address,z+="</div>",f.innerHTML=z,i.id=s.property_id.toString(),o.push(i),i.bindPopup(f)}1==l&&t.addLayer(n),!a&&o.length>0&&U()},E=function(e,t){if(!e)return!1;const a=e.toString();for(var n=t.length,o=0;o<n;o++)if(t[o].id&&t[o].id.toString()===a)return!0;return!1},N=function(){if(!t.OSMUtils.getIsMobile())return e("#half-map-listing-area .hz-map-trigger").each(function(){var t=e(this).data("hz-id");"string"==typeof t?0===t.indexOf("hz-")&&(t=t.replace("hz-","")):t=e(this).data("hz-id").toString().replace(/[^\d.]/g,"");const n=t;e(this).on("mouseenter",function(){!function(e){if(!e)return;const t=e.toString();a.eachLayer(function(e){if(void 0!==e._childCount){var a=e.getAllChildMarkers();E(t,a)&&(e.spiderfy(),a.forEach(function(e){e.id&&e.id.toString()===t&&e.openPopup()}))}else e.id&&e.id.toString()===t&&e.openPopup()})}(n)}).on("mouseleave",function(){!function(e){if(!e)return;const t=e.toString();a.eachLayer(function(e){if(void 0!==e._childCount){var n=e.getAllChildMarkers();E(t,n)&&(e.unspiderfy(),n.forEach(function(a){a.id&&a.id.toString()===t&&e.closePopup()}))}else e.id&&e.id.toString()===t&&(e.closePopup(),a.closePopup())})}(n)})}),!1},B=function(){if(e("#houzez-properties-map").length>0){m=0;let t=e("#radius-range-slider"),a=e("#desktop-search-form");t.on("change",t=>{e('input[name="use_radius"]').prop("checked",!0),e('input[name="ne_lat"]').val(""),e('input[name="ne_lng"]').val(""),e('input[name="sw_lat"]').val(""),e('input[name="sw_lng"]').val(""),e('input[name="zoom"]').val(""),R(null,a)})}},F=function(){if(e("#houzez-properties-map").length>0){m=0;let t=e("#fromSlider_price_range_halfmap"),a=e("#toSlider_price_range_halfmap"),n=e("#desktop-search-form");t.on("change",e=>{R(null,n)}),a.on("change",e=>{R(null,n)})}},D=function(){if(e("#houzez-properties-map").length>0){m=0;let t=e("#fromSlider_price_range_mobile"),a=e("#toSlider_price_range_mobile"),n=e("#mobile-search-form");t.on("change",e=>{R(null,n)}),a.on("change",e=>{R(null,n)})}},H=function(t){var a=t||e("form.houzez-search-filters-js").first();a.length&&a.addClass("loading");var n=a.attr("action");if(null==n)return!0;var o=a.find(":input").filter(function(t,a){if(!e(a).prop("disabled")&&""!=e(a).val()&&"search_geolocation"!=e(a).attr("name")&&"search_URI"!=e(a).attr("name")&&"search_args"!=e(a).attr("name")&&"houzez_save_search_ajax"!=e(a).attr("name"))return!0}).serialize();n=null==n?"":(n.indexOf("?"),n+"?"+o),V(n)},R=function(t=null,a=null,n=0){let o=a;!o&&t&&(o=t.parents("form")),o.addClass("Current Search Form"),o&&o.length&&(e(".hz-halfmap-paged").val(n),H(o),W(n,o))},q=()=>{if(!S)return;if(I)return;_=!0;let t=e("#desktop-search-form");e("#mobile-search-form.hz-mobile-overlay-search-js").length>0&&(t=e("#mobile-search-form"));const n=a.getBounds();if(n){const o=n.getNorthEast(),i=n.getSouthWest(),r=a.getZoom();e('input[name="ne_lat"]').val(o.lat),e('input[name="ne_lng"]').val(o.lng),e('input[name="sw_lat"]').val(i.lat),e('input[name="sw_lng"]').val(i.lng),e('input[name="zoom"]').val(r),e('input[name="use_radius"]').prop("checked",!1),R(null,t)}},W=function(n,o){var i=e("#houzez_ajax_container"),r=(e(".map-wrap"),e("#half-map-listing-area .page-title span")),l=e("#ajax_sort_properties").val(),s=e(".listing-view").data("layout"),u=e(".listing-view").data("css"),c=e(".listing-view").data("view");const p=o.serialize(),d={action:"houzez_half_map_listings",paged:n,sortby:l,item_layout:s,layout_css:u,layout_view:c};d.is_pagination_request=z;let m=p+"&"+e.param(d);return e.ajax({type:"GET",dataType:"json",url:C,data:m,beforeSend:function(){e(".houzez-map-loading").show(),i.empty().append('<div id="houzez-map-loading" class="houzez-map-loading"><div class="mapPlaceholder"><div class="loader-ripple spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div></div>')},success:function(n){if(""!=n.query&&e('input[name="search_args"]').val(n.query),""!=n.search_uri&&e('input[name="search_URI"]').val(n.search_uri),e(".map-notfound").remove(),e(".search-no-results-found").remove(),e(".houzez-map-loading").hide(),n.total_results>0){if(!0===n.getProperties){let e=a.getCenter(),t=a.getZoom();j(),Z(n.properties,a,_),_&&(I=!0,a.setView(e,t),setTimeout(()=>{I=!1},100)),x(n.properties.length,n.total_results)}i.empty().html(n.propHtml),r.empty().html(n.total_results),J(),houzez_listing_lightbox(),houzez_grid_image_gallery(),houzez_grid_call_to_action(),compare_for_ajax_map(),e('[data-bs-toggle="tooltip"]').tooltip(),t.OSMUtils.getIsMobile()||N()}else{j();let t=a.getCenter(),o=a.getZoom();a.setView(t,o),e("#houzez-properties-map").append('<div class="map-notfound" style="z-index: 1000;">'+O+"</div>"),i.empty().html(n.propHtml),r.empty().html(n.total_results)}return!1},complete:function(){z=!1,_=!1,e(".location-trigger").find(".icon-location-target").removeClass("icon-spin")},error:function(e,t,a){}}),!1},V=function(e){window.history.pushState({houzezTheme:!0},"",e)},J=function(){return e(".houzez_ajax_pagination a").on("click",function(t){t.preventDefault(),S&&(z=!0),m=e(this).data("houzepagi"),e(".hz-halfmap-paged").val(m);let a=e("#desktop-search-form");e("#mobile-search-form.apply-mobile-pagination").length>0&&(a=e("#mobile-search-form")),R(null,a,m)}),!1},G=function(){if(e("#houzez-properties-map").length>0){let C,T,O=e("#houzez-properties-map"),P=O.data("map"),j=O.data("options");const U=new URLSearchParams(window.location.search);let E=U.get("lat"),B=U.get("lng");if(E&&B||(E=e('input[name="lat"]').val(),B=e('input[name="lng"]').val()),!P)return;try{C="object"==typeof P?P:JSON.parse(P),"object"==typeof j?T=j:j&&(T=JSON.parse(j))}catch(e){return}T&&(r=T.clusterIcon,l=T.map_cluster_enable,s=T.clusterer_zoom,u=T.closeIcon,c=T.infoWindowPlac,p=T.marker_spiderfier,g=T.markerPricePins,f=T.map_type,h=T.googlemap_style,y=parseFloat(T.default_lat),b=parseFloat(T.default_lng),w=parseFloat(T.default_zoom),k=parseFloat(T.max_zoom),E&&B&&!isNaN(parseFloat(E))&&!isNaN(parseFloat(B))&&(y=parseFloat(E),b=parseFloat(B)),T.center_lat&&T.center_lng&&(y=parseFloat(T.center_lat),b=parseFloat(T.center_lng)));var n=t.OSMUtils.getTileLayer();if(C.properties&&C.properties.length>0){i=C.properties;var m=A(C.properties),z={dragging:!0,center:L.latLng(y,b),zoom:w,maxZoom:k,tap:!1,zoomControl:!1,gestureHandling:!0,touchZoom:!0,bounceAtZoomLimits:!1};a=L.map("houzez-properties-map",z),a.scrollWheelZoom.disable(),1<m.length&&(I=!0,a.fitBounds(m),setTimeout(()=>{I=!1},100)),a.addLayer(n),document.getElementById("listing-mapzoomin")&&(v=a,e("#listing-mapzoomin").on("click",function(){var e=parseInt(v.getZoom(),10);++e>20&&(e=20),v.setZoom(e),t.OSMUtils.getIsMobile()||q()})),document.getElementById("listing-mapzoomout")&&function(a){e("#listing-mapzoomout").on("click",function(){var e=parseInt(a.getZoom(),10);--e<0&&(e=0),a.setZoom(e),t.OSMUtils.getIsMobile()||q()})}(a),Z(C.properties,a),e(".houzez-map-loading").hide();let o=e("#total-results").data("total-results");o>0&&x(C.properties.length,o),t.OSMUtils.getIsMobile()||N()}else{i=[];var _={center:[y,b],zoom:w,tap:!1,touchZoom:!0,gestureHandling:!0,bounceAtZoomLimits:!1};a=L.map("houzez-properties-map",_),a.addLayer(n),a.scrollWheelZoom.disable(),e(".houzez-map-loading").hide()}e("#houzez-gmap-next").on("click",function(){!function(e){for(d++,d>o.length&&(d=1);!1===o[d-1].visible;)d++,d>o.length&&(d=1);e.setView(o[d-1].getLatLng()),o[d-1]._icon||o[d-1].__parent.spiderfy(),d-1==0||d-1==o.length?setTimeout(function(){o[d-1].fire("click")},500):o[d-1].fire("click")}(a)}),e("#houzez-gmap-prev").on("click",function(){!function(e){for(d--,d<1&&(d=o.length);!1===o[d-1].visible;)d--,d>o.length&&(d=1);e.setView(o[d-1].getLatLng()),o[d-1]._icon||o[d-1].__parent.spiderfy(),d-1==0||d==o.length?setTimeout(function(){o[d-1].fire("click")},500):o[d-1].fire("click")}(a)}),e("#houzez-btn-map-view").on("click",function(t){t.preventDefault(),e("#half-map-listing-area, .listing-wrap").hide(),e("#map-view-wrap").show(),e("#mobile-search-form").addClass("hz-mobile-overlay-search-js"),a.invalidateSize(),a.panTo(a.getCenter());var n=A(i);1<n.length&&a.fitBounds(n)}),e("#houzez-btn-listing-view").on("click",function(a){a.preventDefault(),e("#map-view-wrap").hide(),e("#half-map-listing-area, .listing-wrap").show(),e("#mobile-search-form").removeClass("hz-mobile-overlay-search-js"),e(".hz-item-gallery-js").removeClass("houzez-gallery-loaded"),window.setTimeout(function(){t.Core&&"function"==typeof t.Core.reinitializeAjaxFunctions&&t.Core.reinitializeAjaxFunctions()},100)}),e("#houzez-gmap-full-osm").on("click",function(){var t=e(this);t.hasClass("active")?(t.removeClass("active"),t.parents(".map-wrap").removeClass("houzez-fullscreen-map")):(t.parents(".map-wrap").addClass("houzez-fullscreen-map"),t.addClass("active")),a.invalidateSize(),a.panTo(a.getCenter())}),S&&M&&(()=>{if(!a)return;a.off("dragend"),a.off("zoomend");const e=t.OSMUtils.debounce(q,300);a.debouncedMapMoveHandler=e,a.on("dragend",e),t.OSMUtils.getIsMobile()&&a.on("zoomend",e)})()}var v};return{init:function(){G(),J(),e("#ajax_sort_properties").on("change",function(){let t=e("#desktop-search-form");e(this).hasClass("mobile-sortby")&&(t=e("#mobile-search-form")),R(null,t)}),e("select.houzez_search_ajax, input.houzez_search_ajax").on("change",function(){let t=e(this).closest("form");R(null,t)}),e(".btn-apply, .half-map-search-js-btn, #auto_complete_ajax").on("click",function(t){t.preventDefault();let a=e(this).closest("form");R(null,a)}),function(){if(e(".hz-map-field-js").length>0){var t=houzez_vars.geo_country_limit,a=houzez_vars.geocomplete_country,n="";0!=t&&""!=a&&("UAE"==a&&(a="AE"),n=a.toLowerCase());var o=function(e){this.$container=e,this.currentRequest=null,this.requestDelay=300};o.prototype={init:function(){this.initDomElements(),this.autocomplete()},initDomElements:function(){this.addressField=this.$container.data("address-field")},autocomplete:function(){var t=this,a=this.addressField;if(a){var o=document.getElementById(a);if(o){var i=e(o),r=i.parents(".location-search");i.autocomplete({appendTo:"body",source:function(e,a){t.currentRequest&&4!==t.currentRequest.readyState&&t.currentRequest.abort(),clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(()=>{var o={format:"json",q:e.term,limit:10,addressdetails:1};n&&(o.countrycodes=n),t.currentRequest=jQuery.ajax({url:"https://nominatim.openstreetmap.org/search",type:"GET",data:o,dataType:"json",cache:!1,success:function(e){e.length?a(e.map(function(e){return{label:e.display_name,latitude:e.lat,longitude:e.lon,value:e.display_name}})):a([{value:"",label:"there are no results"}])},error:function(e){"abort"!==e.statusText&&a([{value:"",label:"Search service temporarily unavailable"}])}})},t.requestDelay)},minLength:2,delay:0,select:function(t,a){if(r.find('input[name="lat"]').val(a.item.latitude),r.find('input[name="lng"]').val(a.item.longitude),r.find('input[name="ne_lat"]').val(""),r.find('input[name="ne_lng"]').val(""),r.find('input[name="sw_lat"]').val(""),r.find('input[name="sw_lng"]').val(""),r.find('input[name="zoom"]').val(""),r.find('input[name="use_radius"]').prop("checked",!0),M){let t=e(this);R(t)}}}),i.autocomplete("widget").css("z-index",99999)}}}},e(".hz-map-field-js").each(function(){var t=e(this);new o(t).init()});let i=new Set;e(".location-trigger").on("click",function(t){t.preventDefault();let a=e(this),n=a.parents(".location-search"),o=n.find("input.search_location_js"),r=o.attr("id")||"default";i.has(r)||(a.find(".icon-location-target").addClass("icon-spin"),i.add(r),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.get("https://nominatim.openstreetmap.org/reverse",{format:"json",lat:t.coords.latitude,lon:t.coords.longitude,zoom:18,addressdetails:1},function(e){e&&e.display_name?o.val(e.display_name):o.val(houzez_vars.current_location),n.find('input[name="lat"]').val(t.coords.latitude),n.find('input[name="lng"]').val(t.coords.longitude),n.find('input[name="ne_lat"]').val(""),n.find('input[name="ne_lng"]').val(""),n.find('input[name="sw_lat"]').val(""),n.find('input[name="sw_lng"]').val(""),n.find('input[name="zoom"]').val(""),n.find('input[name="use_radius"]').prop("checked",!0),M?R(a):a.find(".icon-location-target").removeClass("icon-spin")},"json").fail(function(e){o.val(houzez_vars.current_location),n.find('input[name="lat"]').val(t.coords.latitude),n.find('input[name="lng"]').val(t.coords.longitude),n.find('input[name="ne_lat"]').val(""),n.find('input[name="ne_lng"]').val(""),n.find('input[name="sw_lat"]').val(""),n.find('input[name="sw_lng"]').val(""),n.find('input[name="zoom"]').val(""),n.find('input[name="use_radius"]').prop("checked",!0),M?R(a):a.find(".icon-location-target").removeClass("icon-spin")}).always(function(){i.delete(r)})},function(e){a.find(".icon-location-target").removeClass("icon-spin"),i.delete(r)}):(a.find(".icon-location-target").removeClass("icon-spin"),i.delete(r)))})}}(),F(),D(),B()},reloadMarkers:j,addMarkers:Z,getMapBounds:A,mapBounds:U,halfMapListings:W,searchOnChange:R,setUrl:H,setupInfoboxTrigger:N,triggerPriceRangeSearch:F,triggerPriceRangeSearchMobile:D,triggerDistanceRangeSearch:B}}(),t.SingleAgentOSM=function(){let a;return{init:function(){if(e("#houzez-agent-sidebar-map").length<=0)return;const n=e("#houzez-agent-sidebar-map").data("lat"),o=e("#houzez-agent-sidebar-map").data("lng");if(""!=n&&""!=o){const e=t.OSMUtils.getTileLayer(),i=L.latLng(n,o),r={dragging:!L.Browser.mobile,center:i,zoom:15,zoomControl:!0,tap:!1,touchZoom:!0,gestureHandling:!0,bounceAtZoomLimits:!1};a=L.map("houzez-agent-sidebar-map",r),a.scrollWheelZoom.disable(),a.addLayer(e)}}}}(),t.SinglePropertyOverviewOSM=function(){let a,n,o=15,i=!1,r="marker",l="no";return{init:function(){if(e("#houzez-overview-listing-map").length<=0)return;const s=e("#houzez-overview-listing-map"),u=s.data("map"),c=s.data("options");if(!u)return;let p,d;try{p="object"==typeof u?u:JSON.parse(u),"object"==typeof c?d=c:c&&(d=JSON.parse(c))}catch(e){return}if(d&&(l=d.markerPricePins,r=d.map_pin_type,"circle"==r&&(i=!0),d.single_map_zoom>0&&(o=parseInt(d.single_map_zoom))),!p.latitude||!p.longitude)return;const m=t.OSMUtils.getTileLayer(),g=L.latLng(p.latitude,p.longitude),h={dragging:!L.Browser.mobile,center:g,zoom:o,zoomControl:!0,tap:!1,touchZoom:!0,gestureHandling:!0,bounceAtZoomLimits:!1};if(a=L.map("houzez-overview-listing-map",h),a.scrollWheelZoom.disable(),a.addLayer(m),i)L.circle(g,200,{color:"#4f5962",fillColor:"#4f5962",fillOpacity:.35,weight:2,opacity:.8}).addTo(a);else if("yes"===l&&p.pricePin){let e=p.marker_color;var f='<div data-id="'+(p.property_id||p.post_id)+'" class="osm-marker map-marker-label"'+(e?' style="background-color: '+e+"; border-color: "+e+'; color: #ffffff;"':"")+">"+p.pricePin+"</div>",z=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:f});n=L.marker(g,{icon:z,riseOnHover:!0}).addTo(a)}else{const e={riseOnHover:!0};if(p.title&&(e.title=p.title),p.marker){const t={iconUrl:p.marker,iconSize:[44,56],iconAnchor:[20,57],popupAnchor:[1,-57]};p.retinaMarker&&(t.iconRetinaUrl=p.retinaMarker),e.icon=L.icon(t)}n=L.marker(g,e).addTo(a)}e('.map-media-tab, a[href="#pills-map"], a[href="#property-address"]').on("shown.bs.tab",function(){setTimeout(()=>{a.invalidateSize(),a.panTo(a.getCenter())},50)})}}}(),t.SinglePropertyOSM=function(){let a,n,o,i=15,r=!1,l="marker",s="no";const u={},c={mapContainerId:"houzez-single-listing-map",mapLoaderSelector:".houzez-map-loading",streetViewTabSelector:'a[href="#pills-street-view"]',propertyAddressTabSelector:'a[href="#pills-map"], a[href="#property-address"]'},p=function(){L.circle(o,200,{color:"#4f5962",fillColor:"#4f5962",fillOpacity:.35,weight:2,opacity:.8}).addTo(a)},d=function(e){if("yes"===s&&e.pricePin){let r=e.marker_color;var t='<div data-id="'+(e.property_id||e.post_id)+'" class="osm-marker map-marker-label"'+(r?' style="background-color: '+r+"; border-color: "+r+'; color: #ffffff;"':"")+">"+e.pricePin+"</div>",i=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:t});n=L.marker(o,{icon:i,riseOnHover:!0}).addTo(a)}else{const t={riseOnHover:!0};if(e.title&&(t.title=e.title),e.marker){const a={iconUrl:e.marker,iconSize:[44,56],iconAnchor:[20,57],popupAnchor:[1,-57]};e.retinaMarker&&(a.iconRetinaUrl=e.retinaMarker),t.icon=L.icon(a)}n=L.marker(o,t).addTo(a)}},m=function(){e(c.mapLoaderSelector).hide()};return{init:function(){[c.mapContainerId,"houzez-single-listing-map-address","houzez-single-listing-map-elementor"].forEach(n=>{const g=document.getElementById(n);if(!g)return;const h=g.getAttribute("data-map"),f=g.getAttribute("data-options");let z,_;if(h&&f)try{z=JSON.parse(h),_=JSON.parse(f)}catch(e){return void m()}else{if("undefined"==typeof houzez_single_property_map||"undefined"==typeof houzez_map_options)return void m();z={latitude:houzez_single_property_map.lat,longitude:houzez_single_property_map.lng,title:houzez_single_property_map.title,marker:houzez_single_property_map.marker,retinaMarker:houzez_single_property_map.retinaMarker,pricePin:houzez_single_property_map.pricePin,term_id:houzez_single_property_map.term_id,post_id:houzez_single_property_map.property_id},_=houzez_map_options}c.mapContainerId=n,function(e,t){return!!(e&&e.latitude&&e.longitude)&&(t&&(s=t.markerPricePins||"no",l=t.map_pin_type||"marker","circle"===l&&(r=!0),t.single_map_zoom>0&&(i=parseInt(t.single_map_zoom))),o=L.latLng(e.latitude,e.longitude),!0)}(z,_)?(a=function(){if(!document.getElementById(c.mapContainerId))return null;const e={dragging:!L.Browser.mobile,center:o,zoom:i,zoomControl:!0,tap:!1,touchZoom:!0,gestureHandling:!0,bounceAtZoomLimits:!1};a=L.map(c.mapContainerId,e),a.scrollWheelZoom.disable();const n=t.OSMUtils.getTileLayer();return a.addLayer(n),u[c.mapContainerId]=a,a}(),a?(!function(e){a&&(r?p():d(e))}(z),e(".map-media-tab, "+c.propertyAddressTabSelector).on("shown.bs.tab",function(){const t=e(e(this).attr("href")).find('[id^="houzez-single-listing-map"]');if(t.length>0){const e=t.attr("id"),a=u[e];a&&setTimeout(()=>{a.invalidateSize(),a.panTo(a.getCenter())},50)}else Object.values(u).forEach(e=>{e&&setTimeout(()=>{e.invalidateSize(),e.panTo(e.getCenter())},50)})}),m()):m()):m()})},config:c,getMapInstances:()=>u,getMapInstance:e=>u[e],resizeAllMaps:()=>{Object.values(u).forEach(e=>{e&&e.invalidateSize&&(e.invalidateSize(),e.panTo(e.getCenter()))})}}}(),e(document).ready(function(){t.OSMUtils.init(),(e("#houzez-properties-map").length>0||e('input[name="search_location"]').length>0)&&t.OSMMap.init(),e("#houzez-agent-sidebar-map").length>0&&t.SingleAgentOSM.init(),e("#houzez-overview-listing-map").length>0&&t.SinglePropertyOverviewOSM.init(),(e("#houzez-single-listing-map").length>0||e("#houzez-single-listing-map-address").length>0||e("#houzez-single-listing-map-elementor").length>0)&&t.SinglePropertyOSM.init()}),window.houzez=t}(jQuery);